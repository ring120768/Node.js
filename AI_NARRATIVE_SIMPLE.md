# AI-Generated Narrative Page - Simplified Field Structure

**Purpose**: Single page for AI-generated factual narrative in "storybook style"
**Style**: Matches simplicity of existing Pages 14-15 in actual PDF
**Legal Context**: May be used as supporting evidence in court proceedings
**Date**: 2025-11-01

---

## YOUR ACTUAL PDF STRUCTURE (Pages 14-15)

**Page 14**: "XXI. AI Summary of Accident Data"
- **Field**: "AI Transcription" (large text area)
- **Purpose**: Verbatim transcription from OpenAI Whisper

**Page 15**: "XXI. AI Summary of Accident Data"
- **Field**: "AI Summary of data collected" (large text area)
- **Purpose**: Concise summary/key points extraction

---

## NEW PAGE 16: AI FACTUAL NARRATIVE

**Page Title**: "XXII. AI-Generated Factual Account"

**Purpose**: Chronological, readable narrative synthesizing all incident data in "storybook style" for legal use

**Layout**: Keep it simple - matching style of Pages 14-15

---

### Fields Required

#### 1. Legal Disclaimer (Header Section - Text Only)

**Purpose**: Clear warning that content is AI-generated

**Text**:
```
⚠️ AI-GENERATED NARRATIVE - REQUIRES PROFESSIONAL VERIFICATION

This narrative was automatically generated by artificial intelligence based on
the information you provided in this report. It is NOT a sworn witness statement
under Civil Procedure Rules Part 22 and has NOT been verified by oath.

All facts should be cross-referenced with primary sources before use in legal
proceedings. This document is intended to assist legal professionals in
understanding the incident chronology only.
```

---

#### 2. Generation Metadata (Small Fields - One Row)

**Purpose**: Document when and how narrative was created

| Field Name | Type | Example Value |
|------------|------|---------------|
| `ai_narrative_date` | Text (readonly) | "01/11/2025" |
| `ai_narrative_time` | Text (readonly) | "14:45 GMT" |
| `ai_model_used` | Text (readonly) | "OpenAI GPT-4o" |
| `data_sources_count` | Text (readonly) | "Based on 98 form fields + transcription + 12 photos" |

**Display**:
```
┌──────────────────────────────────────────────────────────────┐
│ Generated: 01/11/2025 14:45 GMT                              │
│ AI Model: OpenAI GPT-4o                                      │
│ Sources: 98 form fields, audio transcription, 12 photographs │
└──────────────────────────────────────────────────────────────┘
```

---

#### 3. Factual Narrative Field (MAIN CONTENT)

**Purpose**: Large text area for AI-generated narrative - like Pages 14-15

| Field Name | Type | Character Limit | Notes |
|------------|------|-----------------|-------|
| `ai_narrative_text` | Large textarea | 15,000 chars | Full narrative in storybook style |
| `narrative_word_count` | Text (readonly) | — | Auto-calculated (e.g., "2,450 words") |

**Display**:
```
AI-GENERATED FACTUAL NARRATIVE
(Chronological account based on your incident report)

┌──────────────────────────────────────────────────────────────┐
│                                                              │
│ On the morning of Tuesday, 31st October 2025, at            │
│ approximately 09:15 hours GMT, a road traffic collision     │
│ occurred on the A40 Westway near the White City junction    │
│ in West London. The incident involved two vehicles...       │
│                                                              │
│ [LARGE TEXT AREA - 15,000 character limit]                  │
│ [Auto-populated by AI narrative generation service]         │
│                                                              │
│ [Continues for full narrative...]                           │
│                                                              │
└──────────────────────────────────────────────────────────────┘

Word Count: 2,450 words | Reading Time: ~10 minutes
```

---

#### 4. Footer Disclaimer (Text Only)

**Purpose**: Repeat legal warning at bottom of page

**Text**:
```
⚠️ IMPORTANT LEGAL NOTICE

This AI-generated narrative synthesizes information from your incident report
but is NOT a sworn witness statement. It has NOT been verified by a legal
professional and may contain errors.

Before using in legal proceedings:
• Verify all facts against original evidence
• Obtain independent legal advice from a qualified solicitor
• Ensure content is reviewed by legal counsel

Generated by Car Crash Lawyer AI | AI Provider: OpenAI GPT-4o
Processing ID: [UUID] | For legal advice, consult an SRA-regulated solicitor.
```

---

## TOTAL FIELDS: 6 FIELDS ONLY

1. `ai_narrative_date` (auto-populated)
2. `ai_narrative_time` (auto-populated)
3. `ai_model_used` (auto-populated)
4. `data_sources_count` (auto-populated)
5. `ai_narrative_text` **(MAIN FIELD - large textarea)**
6. `narrative_word_count` (auto-calculated)

**Plus**: 2 text-only disclaimer sections (not form fields)

---

## COMPARISON: Over-Engineered vs Simple

### ❌ Over-Engineered Approach (What I Did Initially)
- **68 fields** across 2 pages
- Professional verification sections
- SRA numbers, signatures, review notes
- Fact-checking matrices
- Timeline tables
- Multiple approval workflows
- Complex metadata tracking

### ✅ Simple Approach (What You Actually Need)
- **6 fields** on 1 page
- ONE large text area (like Pages 14-15)
- Basic metadata (date, time, AI model)
- Legal disclaimers (text only, not fields)
- Clean, readable layout
- Matches your existing PDF style

---

## AI NARRATIVE WRITING STYLE GUIDELINES

**For OpenAI GPT-4o prompt**:

```
You are generating a factual account for potential use in UK legal proceedings.

STYLE REQUIREMENTS:
• Third-person perspective ("The claimant", "Mr/Ms [Name]")
• Past tense throughout
• Objective, factual tone - NO opinions
• Storybook style: readable, chronological, engaging
• Quote direct evidence where available
• Mark uncertainties ("The claimant recalls...", "According to...")
• Use precise language ("approximately", "estimated", "reported")
• Include sensory details (weather, sounds, observations)
• Maintain strict chronological flow
• Separate facts from inference

LENGTH: 2,000-2,500 words (10-minute read)

STRUCTURE:
1. Opening: Date, time, location, parties involved
2. Background: Journey start, weather, road conditions
3. Approach: What happened in minutes before collision
4. Collision: Moment of impact, detailed sequence
5. Immediate aftermath: Actions taken, injuries checked
6. Evidence gathering: Photos, details exchanged
7. Summary: Key facts, areas needing further investigation
```

---

## DATABASE SCHEMA (Minimal)

```sql
-- Add one column to existing ai_transcription table
ALTER TABLE ai_transcription
ADD COLUMN narrative_text TEXT,
ADD COLUMN narrative_generated_at TIMESTAMPTZ,
ADD COLUMN narrative_word_count INTEGER;

-- OR create simple new table
CREATE TABLE ai_narratives (
  id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
  create_user_id UUID REFERENCES auth.users(id),
  incident_report_id UUID REFERENCES incident_reports(id),

  narrative_text TEXT,
  ai_model_used TEXT DEFAULT 'OpenAI GPT-4o',
  data_sources_summary TEXT,
  word_count INTEGER,

  created_at TIMESTAMPTZ DEFAULT NOW()
);
```

---

## BACKEND IMPLEMENTATION (Simple)

```javascript
// src/services/aiNarrativeService.js

async function generateFactualNarrative(userId, incidentReportId) {
  // 1. Fetch all data
  const formData = await getIncidentReport(incidentReportId);
  const transcription = await getTranscription(userId);
  const photos = await getPhotoMetadata(userId);

  // 2. Build AI prompt
  const prompt = `
Generate a factual narrative (2000-2500 words) in third-person, past tense,
storybook style based on the following incident data:

INCIDENT OVERVIEW:
Date: ${formData.accident_date}
Time: ${formData.accident_time}
Location: ${formData.location}

TRANSCRIPTION:
${transcription.transcript_text}

FORM DATA:
${JSON.stringify(formData, null, 2)}

PHOTOS: ${photos.length} images available

Write a chronological, readable account suitable for legal proceedings.
Include all key facts, quote evidence, mark uncertainties clearly.
  `;

  // 3. Call OpenAI
  const response = await openai.chat.completions.create({
    model: 'gpt-4o',
    messages: [{ role: 'user', content: prompt }],
    temperature: 0.1, // Low for factual accuracy
    max_tokens: 4000
  });

  const narrativeText = response.choices[0].message.content;

  // 4. Save to database
  await supabase.from('ai_narratives').insert({
    create_user_id: userId,
    incident_report_id: incidentReportId,
    narrative_text: narrativeText,
    word_count: narrativeText.split(/\s+/).length,
    data_sources_summary: `${Object.keys(formData).length} form fields, transcription, ${photos.length} photos`
  });

  return narrativeText;
}
```

---

## PDF FORM IMPLEMENTATION

**Adobe Acrobat Pro Steps**:

1. Create Page 16 with header "XXII. AI-Generated Factual Account"
2. Add disclaimer text at top (not a field, just text)
3. Add 4 small text fields for metadata (read-only):
   - `ai_narrative_date`
   - `ai_narrative_time`
   - `ai_model_used`
   - `data_sources_count`
4. Add ONE large text field: `ai_narrative_text` (covers most of page)
5. Add word count field at bottom: `narrative_word_count` (read-only)
6. Add footer disclaimer text (not a field)

**Field Properties**:
- Font: Arial 11pt for narrative
- Multiline: YES
- Scroll: YES (if narrative exceeds visible area)
- Read-only: YES (all fields - user cannot edit AI content)
- Text color: #333333 (dark gray)
- Background: #FFFFFF (white)

---

## HTML MOCKUP (Next Step)

Create `public/pdf-mockups/page-16-ai-narrative-simple.html` matching:
- Same header/footer as Pages 14-15
- Legal disclaimer at top (yellow warning box)
- Small metadata section
- ONE large textarea (like Pages 14-15)
- Legal disclaimer at bottom

---

## COMPARISON WITH YOUR ACTUAL PDF

| Your Actual PDF | New Page 16 (Simple) |
|-----------------|----------------------|
| Page 14: AI Transcription (1 large field) | Same style! |
| Page 15: AI Summary (1 large field) | Same style! |
| — | **Page 16: AI Narrative (1 large field)** ✅ |

**Total New Fields**: 6 (mostly auto-populated)
**User-visible complexity**: MINIMAL
**Matches existing style**: YES ✅

---

**Version**: 2.0 (Simplified)
**Date**: 2025-11-01
**Status**: Ready for HTML mockup creation
**Next**: Create `page-16-ai-narrative-simple.html`
