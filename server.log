
> car-crash-lawyer-ai-system@2.0.1 dev
> nodemon index.js

[33m[nodemon] 3.1.10[39m
[33m[nodemon] to restart at any time, enter `rs`[39m
[33m[nodemon] watching path(s): *.*[39m
[33m[nodemon] watching extensions: js,mjs,cjs,json[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:84624] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:84624] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T17:46:30.977Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T17:46:31.189Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T17:46:31.216Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T17:46:31.299Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T17:46:31.301Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T17:46:31.307Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T17:46:31.308Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T17:46:31.308Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T17:46:31.308Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T17:46:31.308Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T17:46:31.308Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T17:46:31.308Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T17:46:31.308Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T17:46:31.308Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T17:46:31.308Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T17:46:31.308Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T17:46:31.315Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T17:46:31.315Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T17:46:31.336Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T17:46:31.337Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T17:46:31.338Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T17:46:31.338Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T17:46:31.339Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T17:46:31.341Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T17:46:31.342Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T17:46:31.342Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T17:46:31.342Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T17:46:31.342Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T17:46:31.342Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T17:46:31.342Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T17:46:31.342Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T17:46:31.342Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T17:46:31.343Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T17:46:31.343Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T17:46:31.343Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T17:46:31.343Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T17:46:31.343Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T17:46:31.346Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T17:46:31.346Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T17:46:31.357Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T17:46:31.357Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T17:46:31.358Z ‚úÖ [PID:84624] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T17:46:31.358Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T17:46:31.359Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T17:46:31.359Z üöó Car Crash Lawyer AI - Server Ready [PID:84624]
[36m[INFO][0m 2025-11-17T17:46:31.359Z ============================================================
[32m[SUCCESS][0m 2025-11-17T17:46:31.359Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T17:46:31.359Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T17:46:31.359Z 
üìä Services:
[36m[INFO][0m 2025-11-17T17:46:31.359Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T17:46:31.359Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T17:46:31.359Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T17:46:31.359Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T17:46:31.359Z ============================================================

[32m[SUCCESS][0m 2025-11-17T17:46:32.376Z ‚úÖ Health check passed: 200
[32m[SUCCESS][0m 2025-11-17T17:46:32.490Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T17:46:32.959Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T17:46:33.698Z ‚úÖ OpenAI connected
[32m[SUCCESS][0m 2025-11-17T17:46:33.861Z ‚úÖ Supabase connected
[36m[INFO][0m 2025-11-17T17:48:05.723Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T17:48:05.723Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"driving_license_picture","filename":"IMG_0402.jpeg","size":"4420.78 KB","mimeType":"image/jpeg"}
[36m[INFO][0m 2025-11-17T17:48:05.727Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/driving_license_picture_1763401685727.jpeg
[36m[INFO][0m 2025-11-17T17:48:25.071Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:48:25 +0000] \"POST /api/images/temp-upload HTTP/1.1\" - - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:48:30.042Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:48:30 +0000] \"GET /login-improved.html HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[32m[SUCCESS][0m 2025-11-17T17:48:30.651Z ‚úÖ Temp upload successful: {"uploadId":"39ba2e6a-8131-44c7-9e39-fc365b89030d","path":"temp/session_1761606486250_qp7p5l2cq/driving_license_picture_1763401685727.jpeg","expiresAt":"2025-11-18T17:48:30.275Z"}
[36m[INFO][0m 2025-11-17T17:48:32.297Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:48:32 +0000] \"GET /signup-auth.html HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:48:33.326Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:48:33 +0000] \"GET /signup-form.html HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:48:33.337Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:48:33 +0000] \"GET /images/logo.png HTTP/1.1\" 304 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:48:33.345Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:48:33 +0000] \"GET /api/config HTTP/1.1\" 304 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:49:00.865Z DVLA lookup requested {"vehicle_license_plate":"C8YSP"}
[36m[INFO][0m 2025-11-17T17:49:00.865Z Looking up vehicle via DVLA API {"registration":"C8YSP"}
[32m[SUCCESS][0m 2025-11-17T17:49:01.262Z DVLA lookup successful {"registration":"C8YSP","make":"MERCEDES-BENZ","model":"2018-06"}
[32m[SUCCESS][0m 2025-11-17T17:49:01.262Z DVLA lookup successful {"registration":"C8YSP","make":"MERCEDES-BENZ"}
[36m[INFO][0m 2025-11-17T17:49:01.264Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:49:01 +0000] \"POST /api/other-vehicles/dvla-lookup HTTP/1.1\" 200 488 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:49:34.929Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T17:49:34.929Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"driving_license_picture","filename":"IMG_0403.jpeg","size":"4464.93 KB","mimeType":"image/jpeg"}
[36m[INFO][0m 2025-11-17T17:49:34.933Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/driving_license_picture_1763401774933.jpeg
[32m[SUCCESS][0m 2025-11-17T17:50:00.287Z ‚úÖ Temp upload successful: {"uploadId":"83d69fb1-2d3b-4eca-a178-a491d6bef53c","path":"temp/session_1761606486250_qp7p5l2cq/driving_license_picture_1763401774933.jpeg","expiresAt":"2025-11-18T17:50:00.141Z"}
[36m[INFO][0m 2025-11-17T17:50:00.289Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:50:00 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 200 471 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:50:13.657Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T17:50:13.657Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_front_image","filename":"IMG_0397.jpeg","size":"3872.08 KB","mimeType":"image/jpeg"}
[36m[INFO][0m 2025-11-17T17:50:13.660Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_front_image_1763401813660.jpeg
[31m[ERROR][0m 2025-11-17T17:50:43.644Z Request timeout: {"url":"/temp-upload","method":"POST","requestId":"req_1763401813645_jcc3rdyz5"}
[36m[INFO][0m 2025-11-17T17:50:43.648Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:50:43 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 408 69 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:50:57.370Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T17:50:57.371Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_front_image","filename":"IMG_0398.jpeg","size":"4884.39 KB","mimeType":"image/jpeg"}
[36m[INFO][0m 2025-11-17T17:50:57.375Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_front_image_1763401857375.jpeg
[32m[SUCCESS][0m 2025-11-17T17:51:10.689Z ‚úÖ Temp upload successful: {"uploadId":"b12b4495-432f-43cc-b077-29b9d4128372","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_front_image_1763401813660.jpeg","expiresAt":"2025-11-18T17:51:05.254Z"}
[31m[ERROR][0m 2025-11-17T17:51:10.692Z ‚ùå Temp upload error: Error: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)
    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)
    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)
    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:158:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[31m[ERROR][0m 2025-11-17T17:51:10.693Z Unhandled Rejection in agent service: {"reason":"Cannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (node:_http_outgoing:642:11)\n    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)\n    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)\n    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)\n    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:170:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","promise":{}}
[31m[ERROR][0m 2025-11-17T17:51:10.694Z [reason:] ‚ùå [PID:84624] Unhandled Rejection at: {}
[31m[ERROR][0m 2025-11-17T17:51:27.350Z Request timeout: {"url":"/temp-upload","method":"POST","requestId":"req_1763401857352_e3md64ro0"}
[36m[INFO][0m 2025-11-17T17:51:27.352Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:51:27 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 408 69 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[32m[SUCCESS][0m 2025-11-17T17:51:55.767Z ‚úÖ Temp upload successful: {"uploadId":"c8a197ea-6036-4a6c-a9f5-4d7bc12c915f","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_front_image_1763401857375.jpeg","expiresAt":"2025-11-18T17:51:55.419Z"}
[31m[ERROR][0m 2025-11-17T17:51:55.767Z ‚ùå Temp upload error: Error: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)
    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)
    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)
    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:158:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[31m[ERROR][0m 2025-11-17T17:51:55.768Z Unhandled Rejection in agent service: {"reason":"Cannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (node:_http_outgoing:642:11)\n    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)\n    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)\n    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)\n    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:170:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","promise":{}}
[31m[ERROR][0m 2025-11-17T17:51:55.768Z [reason:] ‚ùå [PID:84624] Unhandled Rejection at: {}
[36m[INFO][0m 2025-11-17T17:53:17.583Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T17:53:17.583Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_front_image","filename":"IMG_0396.jpeg","size":"3368.41 KB","mimeType":"image/jpeg"}
[36m[INFO][0m 2025-11-17T17:53:17.586Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_front_image_1763401997586.jpeg
[36m[INFO][0m 2025-11-17T17:53:28.965Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:53:28 +0000] \"GET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1\" 404 135 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[32m[SUCCESS][0m 2025-11-17T17:53:45.054Z ‚úÖ Temp upload successful: {"uploadId":"f33c7cc1-edb7-4de1-a918-343ce928a372","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_front_image_1763401997586.jpeg","expiresAt":"2025-11-18T17:53:44.923Z"}
[36m[INFO][0m 2025-11-17T17:53:45.054Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:53:45 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 200 463 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:53:57.477Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T17:53:57.477Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_driver_side_image","filename":"IMG_0395.png","size":"601.13 KB","mimeType":"image/png"}
[36m[INFO][0m 2025-11-17T17:53:57.478Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_driver_side_image_1763402037477.png
[32m[SUCCESS][0m 2025-11-17T17:54:01.282Z ‚úÖ Temp upload successful: {"uploadId":"45fae670-4043-4777-93f7-79cd94c3ae0e","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_driver_side_image_1763402037477.png","expiresAt":"2025-11-18T17:54:01.193Z"}
[36m[INFO][0m 2025-11-17T17:54:01.282Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:54:01 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 200 472 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:54:12.368Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T17:54:12.368Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_passenger_side_image","filename":"IMG_4915.png","size":"8073.36 KB","mimeType":"image/png"}
[36m[INFO][0m 2025-11-17T17:54:12.373Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402052373.png
[31m[ERROR][0m 2025-11-17T17:54:42.346Z Request timeout: {"url":"/temp-upload","method":"POST","requestId":"req_1763402052346_zsiwpi7s2"}
[36m[INFO][0m 2025-11-17T17:54:42.348Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:54:42 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 408 69 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:54:51.674Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T17:54:51.674Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_passenger_side_image","filename":"IMG_4914.png","size":"8073.36 KB","mimeType":"image/png"}
[36m[INFO][0m 2025-11-17T17:54:51.678Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402091678.png
[32m[SUCCESS][0m 2025-11-17T17:55:10.562Z ‚úÖ Temp upload successful: {"uploadId":"bf95be37-4082-4b15-a70d-02bec0480344","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402052373.png","expiresAt":"2025-11-18T17:55:07.490Z"}
[31m[ERROR][0m 2025-11-17T17:55:10.562Z ‚ùå Temp upload error: Error: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)
    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)
    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)
    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:158:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[31m[ERROR][0m 2025-11-17T17:55:10.563Z Unhandled Rejection in agent service: {"reason":"Cannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (node:_http_outgoing:642:11)\n    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)\n    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)\n    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)\n    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:170:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","promise":{}}
[31m[ERROR][0m 2025-11-17T17:55:10.564Z [reason:] ‚ùå [PID:84624] Unhandled Rejection at: {}
[31m[ERROR][0m 2025-11-17T17:55:21.641Z Request timeout: {"url":"/temp-upload","method":"POST","requestId":"req_1763402091642_7pyl8hyqo"}
[36m[INFO][0m 2025-11-17T17:55:21.644Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:55:21 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 408 69 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T17:55:34.685Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T17:55:34.685Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_passenger_side_image","filename":"IMG_0394.jpeg","size":"3064.99 KB","mimeType":"image/jpeg"}
[36m[INFO][0m 2025-11-17T17:55:34.687Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402134687.jpeg
[31m[ERROR][0m 2025-11-17T17:56:04.673Z Request timeout: {"url":"/temp-upload","method":"POST","requestId":"req_1763402134674_panthu1qd"}
[36m[INFO][0m 2025-11-17T17:56:04.675Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:17:56:04 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 408 69 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[32m[SUCCESS][0m 2025-11-17T17:56:40.667Z ‚úÖ Temp upload successful: {"uploadId":"9f671eda-50c6-425f-be18-b7b2e94f34be","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402134687.jpeg","expiresAt":"2025-11-18T17:56:40.315Z"}
[31m[ERROR][0m 2025-11-17T17:56:40.669Z ‚ùå Temp upload error: Error: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)
    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)
    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)
    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:158:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[31m[ERROR][0m 2025-11-17T17:56:40.670Z Unhandled Rejection in agent service: {"reason":"Cannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (node:_http_outgoing:642:11)\n    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)\n    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)\n    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)\n    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:170:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","promise":{}}
[31m[ERROR][0m 2025-11-17T17:56:40.670Z [reason:] ‚ùå [PID:84624] Unhandled Rejection at: {}
[32m[SUCCESS][0m 2025-11-17T17:56:41.248Z ‚úÖ Temp upload successful: {"uploadId":"ec3ac9f2-2f99-4438-8cd2-bfc0f7490d6d","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402091678.png","expiresAt":"2025-11-18T17:56:41.002Z"}
[31m[ERROR][0m 2025-11-17T17:56:41.248Z ‚ùå Temp upload error: Error: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)
    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)
    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)
    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:158:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[31m[ERROR][0m 2025-11-17T17:56:41.249Z Unhandled Rejection in agent service: {"reason":"Cannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (node:_http_outgoing:642:11)\n    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)\n    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)\n    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)\n    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:170:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","promise":{}}
[31m[ERROR][0m 2025-11-17T17:56:41.249Z [reason:] ‚ùå [PID:84624] Unhandled Rejection at: {}
[36m[INFO][0m 2025-11-17T18:03:12.702Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T18:03:12.703Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_passenger_side_image","filename":"IMG_0403.jpeg","size":"4464.93 KB","mimeType":"image/jpeg"}
[36m[INFO][0m 2025-11-17T18:03:12.708Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402592707.jpeg
[31m[ERROR][0m 2025-11-17T18:03:42.681Z Request timeout: {"url":"/temp-upload","method":"POST","requestId":"req_1763402592683_a1ln2a5z4"}
[36m[INFO][0m 2025-11-17T18:03:42.684Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:03:42 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 408 69 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[32m[SUCCESS][0m 2025-11-17T18:03:48.418Z ‚úÖ Temp upload successful: {"uploadId":"72c830c8-9eac-4373-974d-24aa20173e3b","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402592707.jpeg","expiresAt":"2025-11-18T18:03:47.939Z"}
[31m[ERROR][0m 2025-11-17T18:03:48.418Z ‚ùå Temp upload error: Error: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)
    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)
    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)
    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:158:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[31m[ERROR][0m 2025-11-17T18:03:48.419Z Unhandled Rejection in agent service: {"reason":"Cannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (node:_http_outgoing:642:11)\n    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)\n    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)\n    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)\n    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:170:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","promise":{}}
[31m[ERROR][0m 2025-11-17T18:03:48.419Z [reason:] ‚ùå [PID:84624] Unhandled Rejection at: {}
[36m[INFO][0m 2025-11-17T18:03:56.464Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T18:03:56.464Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_passenger_side_image","filename":"IMG_0395.png","size":"601.13 KB","mimeType":"image/png"}
[36m[INFO][0m 2025-11-17T18:03:56.466Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402636466.png
[32m[SUCCESS][0m 2025-11-17T18:04:00.749Z ‚úÖ Temp upload successful: {"uploadId":"eca47a16-afc2-413c-a767-0856ec2a0f20","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402636466.png","expiresAt":"2025-11-18T18:04:00.570Z"}
[36m[INFO][0m 2025-11-17T18:04:00.750Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:04:00 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 200 478 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T18:04:11.545Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T18:04:11.545Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_back_image","filename":"IMG_0394.jpeg","size":"3064.99 KB","mimeType":"image/jpeg"}
[36m[INFO][0m 2025-11-17T18:04:11.547Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_back_image_1763402651547.jpeg
[31m[ERROR][0m 2025-11-17T18:04:41.534Z Request timeout: {"url":"/temp-upload","method":"POST","requestId":"req_1763402651535_r3cqeanzw"}
[36m[INFO][0m 2025-11-17T18:04:41.538Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:04:41 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 408 69 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[32m[SUCCESS][0m 2025-11-17T18:04:43.613Z ‚úÖ Temp upload successful: {"uploadId":"7ccb3518-f1d7-4ac3-a467-116c2275dde3","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_back_image_1763402651547.jpeg","expiresAt":"2025-11-18T18:04:43.369Z"}
[31m[ERROR][0m 2025-11-17T18:04:43.614Z ‚ùå Temp upload error: Error: Cannot set headers after they are sent to the client
Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client
    at ServerResponse.setHeader (node:_http_outgoing:642:11)
    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)
    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)
    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)
    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:158:28)
    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
[31m[ERROR][0m 2025-11-17T18:04:43.614Z Unhandled Rejection in agent service: {"reason":"Cannot set headers after they are sent to the client","stack":"Error [ERR_HTTP_HEADERS_SENT]: Cannot set headers after they are sent to the client\n    at ServerResponse.setHeader (node:_http_outgoing:642:11)\n    at ServerResponse.header (/Users/ianring/Node.js/node_modules/express/lib/response.js:794:10)\n    at ServerResponse.send (/Users/ianring/Node.js/node_modules/express/lib/response.js:174:12)\n    at ServerResponse.json (/Users/ianring/Node.js/node_modules/express/lib/response.js:278:15)\n    at tempUpload (/Users/ianring/Node.js/src/controllers/tempImageUpload.controller.js:170:28)\n    at process.processTicksAndRejections (node:internal/process/task_queues:105:5)","promise":{}}
[31m[ERROR][0m 2025-11-17T18:04:43.614Z [reason:] ‚ùå [PID:84624] Unhandled Rejection at: {}
[36m[INFO][0m 2025-11-17T18:04:59.188Z üì∏ Received temp image upload request
[36m[INFO][0m 2025-11-17T18:04:59.188Z üìã Temp upload details: {"sessionId":"session_1761606486250_qp7p5l2cq","fieldName":"vehicle_back_image","filename":"IMG_0395.png","size":"601.13 KB","mimeType":"image/png"}
[36m[INFO][0m 2025-11-17T18:04:59.189Z üì§ Uploading to temp storage: temp/session_1761606486250_qp7p5l2cq/vehicle_back_image_1763402699189.png
[32m[SUCCESS][0m 2025-11-17T18:05:02.279Z ‚úÖ Temp upload successful: {"uploadId":"fd72e14f-c268-428b-bc6f-3034d22ecf6b","path":"temp/session_1761606486250_qp7p5l2cq/vehicle_back_image_1763402699189.png","expiresAt":"2025-11-18T18:05:02.075Z"}
[36m[INFO][0m 2025-11-17T18:05:02.280Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:05:02 +0000] \"POST /api/images/temp-upload HTTP/1.1\" 200 458 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T18:06:07.012Z üìù Received signup form submission
[36m[INFO][0m 2025-11-17T18:06:07.012Z üìã Form data: {"hasSessionId":true,"fields":59,"hasImages":true}
[36m[INFO][0m 2025-11-17T18:06:07.013Z üì∏ Image upload status: {"uploaded":5,"missing":0,"missingList":[],"tempPaths":["temp/session_1761606486250_qp7p5l2cq/driving_license_picture_1763401774933.jpeg","temp/session_1761606486250_qp7p5l2cq/vehicle_front_image_1763401997586.jpeg","temp/session_1761606486250_qp7p5l2cq/vehicle_driver_side_image_1763402037477.png","temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402636466.png","temp/session_1761606486250_qp7p5l2cq/vehicle_back_image_1763402699189.png"]}
[36m[INFO][0m 2025-11-17T18:06:07.013Z ‚úÖ Using authenticated user ID: ee7cfcaf-5810-4c62-b99b-ab0f2291733e
[36m[INFO][0m 2025-11-17T18:06:07.013Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[36m[INFO][0m 2025-11-17T18:06:07.013Z üíæ Inserting user_signup record...
[32m[SUCCESS][0m 2025-11-17T18:06:07.713Z ‚úÖ User record created: ee7cfcaf-5810-4c62-b99b-ab0f2291733e
[36m[INFO][0m 2025-11-17T18:06:07.911Z GDPR activity logged {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","activityType":"ACCOUNT_CREATED","storagePath":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e/gdpr-audit/1763402767714_ACCOUNT_CREATED.json"}
[36m[INFO][0m 2025-11-17T18:06:07.911Z ‚úÖ GDPR audit log created for signup
[36m[INFO][0m 2025-11-17T18:06:07.911Z üì∏ Processing temp uploads... {"sessionId":"session_1761606486250_qp7p5l2cq","tempUploadsCount":5}
[36m[INFO][0m 2025-11-17T18:06:07.911Z üîÑ Moving driving_license_picture from temp to permanent storage... {"tempPath":"temp/session_1761606486250_qp7p5l2cq/driving_license_picture_1763401774933.jpeg","uploadId":"83d69fb1-2d3b-4eca-a178-a491d6bef53c"}
[36m[INFO][0m 2025-11-17T18:06:08.067Z üì¶ Moving: temp/session_1761606486250_qp7p5l2cq/driving_license_picture_1763401774933.jpeg ‚Üí users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/driving_license_picture_1763401774933.jpeg
[36m[INFO][0m 2025-11-17T18:06:08.474Z üîç DEBUG: About to generate signed URL {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"driving_license_picture","permanentPath":"users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/driving_license_picture_1763401774933.jpeg","publicUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/public/user-documents/users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/driving_license_picture_1763401774933.jpeg"}
[36m[INFO][0m 2025-11-17T18:06:08.696Z ‚úÖ DEBUG: Signed URL generated successfully {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"driving_license_picture","signedUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/sign/user-documents/users/ee7cfcaf-5810-4...","expiresAt":"2026-11-17T18:06:08.696Z","expirySeconds":31536000}
[36m[INFO][0m 2025-11-17T18:06:08.697Z üîç DEBUG: About to call createDocumentRecord with URL fields {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"driving_license_picture","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"2026-11-17T18:06:08.696Z","signedUrlLength":537}
[36m[INFO][0m 2025-11-17T18:06:08.697Z üîç DEBUG: createDocumentRecord called with URL parameters {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"driving_license_picture","status":"completed","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"PRESENT","signed_url_length":537,"public_url_length":537}
[36m[INFO][0m 2025-11-17T18:06:08.698Z üîç DEBUG: Document record object prepared for database insert {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"driving_license_picture","hasPublicUrl":true,"hasSignedUrl":true,"hasSignedUrlExpiry":true}
[36m[INFO][0m 2025-11-17T18:06:08.962Z ‚úÖ DEBUG: Document record created in database {"id":"d002824d-da10-4957-b5ca-240e4930feb4","documentType":"driving_license_picture","status":"completed","public_url_in_db":"PRESENT","signed_url_in_db":"PRESENT","signed_url_expires_at_in_db":"PRESENT"}
[36m[INFO][0m 2025-11-17T18:06:08.962Z ‚úÖ DEBUG: createDocumentRecord completed {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"driving_license_picture","documentId":"d002824d-da10-4957-b5ca-240e4930feb4","recordCreated":true}
[32m[SUCCESS][0m 2025-11-17T18:06:09.053Z ‚úÖ driving_license_picture moved successfully: users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/driving_license_picture_1763401774933.jpeg
[36m[INFO][0m 2025-11-17T18:06:09.053Z üîÑ Moving vehicle_front_image from temp to permanent storage... {"tempPath":"temp/session_1761606486250_qp7p5l2cq/vehicle_front_image_1763401997586.jpeg","uploadId":"f33c7cc1-edb7-4de1-a918-343ce928a372"}
[36m[INFO][0m 2025-11-17T18:06:09.158Z üì¶ Moving: temp/session_1761606486250_qp7p5l2cq/vehicle_front_image_1763401997586.jpeg ‚Üí users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_front_image_1763401997586.jpeg
[36m[INFO][0m 2025-11-17T18:06:09.634Z üîç DEBUG: About to generate signed URL {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_front_image","permanentPath":"users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_front_image_1763401997586.jpeg","publicUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/public/user-documents/users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_front_image_1763401997586.jpeg"}
[36m[INFO][0m 2025-11-17T18:06:09.762Z ‚úÖ DEBUG: Signed URL generated successfully {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_front_image","signedUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/sign/user-documents/users/ee7cfcaf-5810-4...","expiresAt":"2026-11-17T18:06:09.762Z","expirySeconds":31536000}
[36m[INFO][0m 2025-11-17T18:06:09.762Z üîç DEBUG: About to call createDocumentRecord with URL fields {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_front_image","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"2026-11-17T18:06:09.762Z","signedUrlLength":527}
[36m[INFO][0m 2025-11-17T18:06:09.762Z üîç DEBUG: createDocumentRecord called with URL parameters {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"vehicle_front_image","status":"completed","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"PRESENT","signed_url_length":527,"public_url_length":527}
[36m[INFO][0m 2025-11-17T18:06:09.762Z üîç DEBUG: Document record object prepared for database insert {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"vehicle_front_image","hasPublicUrl":true,"hasSignedUrl":true,"hasSignedUrlExpiry":true}
[36m[INFO][0m 2025-11-17T18:06:09.888Z ‚úÖ DEBUG: Document record created in database {"id":"3c1b3f00-f9a2-4f6a-bef7-4f68ae3b629e","documentType":"vehicle_front_image","status":"completed","public_url_in_db":"PRESENT","signed_url_in_db":"PRESENT","signed_url_expires_at_in_db":"PRESENT"}
[36m[INFO][0m 2025-11-17T18:06:09.888Z ‚úÖ DEBUG: createDocumentRecord completed {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_front_image","documentId":"3c1b3f00-f9a2-4f6a-bef7-4f68ae3b629e","recordCreated":true}
[32m[SUCCESS][0m 2025-11-17T18:06:09.981Z ‚úÖ vehicle_front_image moved successfully: users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_front_image_1763401997586.jpeg
[36m[INFO][0m 2025-11-17T18:06:09.981Z üîÑ Moving vehicle_driver_side_image from temp to permanent storage... {"tempPath":"temp/session_1761606486250_qp7p5l2cq/vehicle_driver_side_image_1763402037477.png","uploadId":"45fae670-4043-4777-93f7-79cd94c3ae0e"}
[36m[INFO][0m 2025-11-17T18:06:10.176Z üì¶ Moving: temp/session_1761606486250_qp7p5l2cq/vehicle_driver_side_image_1763402037477.png ‚Üí users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_driver_side_image_1763402037477.png
[36m[INFO][0m 2025-11-17T18:06:10.501Z üîç DEBUG: About to generate signed URL {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_driver_side_image","permanentPath":"users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_driver_side_image_1763402037477.png","publicUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/public/user-documents/users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_driver_side_image_1763402037477.png"}
[36m[INFO][0m 2025-11-17T18:06:10.581Z ‚úÖ DEBUG: Signed URL generated successfully {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_driver_side_image","signedUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/sign/user-documents/users/ee7cfcaf-5810-4...","expiresAt":"2026-11-17T18:06:10.581Z","expirySeconds":31536000}
[36m[INFO][0m 2025-11-17T18:06:10.581Z üîç DEBUG: About to call createDocumentRecord with URL fields {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_driver_side_image","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"2026-11-17T18:06:10.581Z","signedUrlLength":539}
[36m[INFO][0m 2025-11-17T18:06:10.581Z üîç DEBUG: createDocumentRecord called with URL parameters {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"vehicle_driver_side_image","status":"completed","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"PRESENT","signed_url_length":539,"public_url_length":539}
[36m[INFO][0m 2025-11-17T18:06:10.581Z üîç DEBUG: Document record object prepared for database insert {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"vehicle_driver_side_image","hasPublicUrl":true,"hasSignedUrl":true,"hasSignedUrlExpiry":true}
[36m[INFO][0m 2025-11-17T18:06:10.675Z ‚úÖ DEBUG: Document record created in database {"id":"57c94fab-4e44-4a15-813b-2ac96df081a6","documentType":"vehicle_driver_side_image","status":"completed","public_url_in_db":"PRESENT","signed_url_in_db":"PRESENT","signed_url_expires_at_in_db":"PRESENT"}
[36m[INFO][0m 2025-11-17T18:06:10.676Z ‚úÖ DEBUG: createDocumentRecord completed {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_driver_side_image","documentId":"57c94fab-4e44-4a15-813b-2ac96df081a6","recordCreated":true}
[32m[SUCCESS][0m 2025-11-17T18:06:10.743Z ‚úÖ vehicle_driver_side_image moved successfully: users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_driver_side_image_1763402037477.png
[36m[INFO][0m 2025-11-17T18:06:10.743Z üîÑ Moving vehicle_passenger_side_image from temp to permanent storage... {"tempPath":"temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402636466.png","uploadId":"eca47a16-afc2-413c-a767-0856ec2a0f20"}
[36m[INFO][0m 2025-11-17T18:06:10.827Z üì¶ Moving: temp/session_1761606486250_qp7p5l2cq/vehicle_passenger_side_image_1763402636466.png ‚Üí users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_passenger_side_image_1763402636466.png
[36m[INFO][0m 2025-11-17T18:06:11.151Z üîç DEBUG: About to generate signed URL {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_passenger_side_image","permanentPath":"users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_passenger_side_image_1763402636466.png","publicUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/public/user-documents/users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_passenger_side_image_1763402636466.png"}
[36m[INFO][0m 2025-11-17T18:06:11.274Z ‚úÖ DEBUG: Signed URL generated successfully {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_passenger_side_image","signedUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/sign/user-documents/users/ee7cfcaf-5810-4...","expiresAt":"2026-11-17T18:06:11.274Z","expirySeconds":31536000}
[36m[INFO][0m 2025-11-17T18:06:11.275Z üîç DEBUG: About to call createDocumentRecord with URL fields {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_passenger_side_image","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"2026-11-17T18:06:11.274Z","signedUrlLength":546}
[36m[INFO][0m 2025-11-17T18:06:11.275Z üîç DEBUG: createDocumentRecord called with URL parameters {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"vehicle_passenger_side_image","status":"completed","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"PRESENT","signed_url_length":546,"public_url_length":546}
[36m[INFO][0m 2025-11-17T18:06:11.275Z üîç DEBUG: Document record object prepared for database insert {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"vehicle_passenger_side_image","hasPublicUrl":true,"hasSignedUrl":true,"hasSignedUrlExpiry":true}
[36m[INFO][0m 2025-11-17T18:06:11.375Z ‚úÖ DEBUG: Document record created in database {"id":"69a643d6-e88d-484e-be45-e54d8dbef3a8","documentType":"vehicle_passenger_side_image","status":"completed","public_url_in_db":"PRESENT","signed_url_in_db":"PRESENT","signed_url_expires_at_in_db":"PRESENT"}
[36m[INFO][0m 2025-11-17T18:06:11.375Z ‚úÖ DEBUG: createDocumentRecord completed {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_passenger_side_image","documentId":"69a643d6-e88d-484e-be45-e54d8dbef3a8","recordCreated":true}
[32m[SUCCESS][0m 2025-11-17T18:06:11.485Z ‚úÖ vehicle_passenger_side_image moved successfully: users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_passenger_side_image_1763402636466.png
[36m[INFO][0m 2025-11-17T18:06:11.485Z üîÑ Moving vehicle_back_image from temp to permanent storage... {"tempPath":"temp/session_1761606486250_qp7p5l2cq/vehicle_back_image_1763402699189.png","uploadId":"fd72e14f-c268-428b-bc6f-3034d22ecf6b"}
[36m[INFO][0m 2025-11-17T18:06:11.630Z üì¶ Moving: temp/session_1761606486250_qp7p5l2cq/vehicle_back_image_1763402699189.png ‚Üí users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_back_image_1763402699189.png
[36m[INFO][0m 2025-11-17T18:06:11.868Z üîç DEBUG: About to generate signed URL {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_back_image","permanentPath":"users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_back_image_1763402699189.png","publicUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/public/user-documents/users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_back_image_1763402699189.png"}
[36m[INFO][0m 2025-11-17T18:06:11.981Z ‚úÖ DEBUG: Signed URL generated successfully {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_back_image","signedUrl":"https://kctlcmbjmhcfoobmkfrs.supabase.co/storage/v1/object/sign/user-documents/users/ee7cfcaf-5810-4...","expiresAt":"2026-11-17T18:06:11.981Z","expirySeconds":31536000}
[36m[INFO][0m 2025-11-17T18:06:11.981Z üîç DEBUG: About to call createDocumentRecord with URL fields {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_back_image","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"2026-11-17T18:06:11.981Z","signedUrlLength":523}
[36m[INFO][0m 2025-11-17T18:06:11.981Z üîç DEBUG: createDocumentRecord called with URL parameters {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"vehicle_back_image","status":"completed","public_url":"PRESENT","signed_url":"PRESENT","signed_url_expires_at":"PRESENT","signed_url_length":523,"public_url_length":523}
[36m[INFO][0m 2025-11-17T18:06:11.982Z üîç DEBUG: Document record object prepared for database insert {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","documentType":"vehicle_back_image","hasPublicUrl":true,"hasSignedUrl":true,"hasSignedUrlExpiry":true}
[36m[INFO][0m 2025-11-17T18:06:12.092Z ‚úÖ DEBUG: Document record created in database {"id":"c2cbee20-7ef7-40e2-804f-9e9a78652974","documentType":"vehicle_back_image","status":"completed","public_url_in_db":"PRESENT","signed_url_in_db":"PRESENT","signed_url_expires_at_in_db":"PRESENT"}
[36m[INFO][0m 2025-11-17T18:06:12.092Z ‚úÖ DEBUG: createDocumentRecord completed {"userId":"ee7cfcaf-5810-4c62-b99b-ab0f2291733e","fieldName":"vehicle_back_image","documentId":"c2cbee20-7ef7-40e2-804f-9e9a78652974","recordCreated":true}
[32m[SUCCESS][0m 2025-11-17T18:06:12.167Z ‚úÖ vehicle_back_image moved successfully: users/ee7cfcaf-5810-4c62-b99b-ab0f2291733e/signup/vehicle_back_image_1763402699189.png
[32m[SUCCESS][0m 2025-11-17T18:06:12.168Z üéâ User signup completed successfully: ee7cfcaf-5810-4c62-b99b-ab0f2291733e
[36m[INFO][0m 2025-11-17T18:06:12.173Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:06:12 +0000] \"POST /api/signup/submit HTTP/1.1\" 201 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T18:06:12.222Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:06:12 +0000] \"GET /payment-success.html HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T18:06:12.234Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:06:12 +0000] \"GET /css/mascot.css HTTP/1.1\" 200 977 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T18:06:12.313Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:06:12 +0000] \"GET /js/mascot.js HTTP/1.1\" 200 - \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T18:06:12.366Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:06:12 +0000] \"GET /.well-known/appspecific/com.chrome.devtools.json HTTP/1.1\" 404 135 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T18:06:12.699Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:06:12 +0000] \"GET /api/config HTTP/1.1\" 200 460 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[36m[INFO][0m 2025-11-17T18:06:12.704Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:06:12 +0000] \"GET /images/mascot.png HTTP/1.1\" 200 1587548 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[31m[ERROR][0m 2025-11-17T18:06:13.180Z Supabase error {"code":"42703","details":null,"hint":null,"message":"column user_signup.emergency_contact_number does not exist"}
[36m[INFO][0m 2025-11-17T18:06:13.181Z HTTP {"message":"127.0.0.1 - - [17/Nov/2025:18:06:13 +0000] \"GET /api/emergency/contacts/ee7cfcaf-5810-4c62-b99b-ab0f2291733e HTTP/1.1\" 404 147 \"-\" \"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15_7) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/142.0.0.0 Safari/537.36\""}
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:85836] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:85836] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T18:15:03.919Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T18:15:04.130Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T18:15:04.156Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T18:15:04.238Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T18:15:04.240Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T18:15:04.247Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T18:15:04.248Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T18:15:04.248Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T18:15:04.248Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T18:15:04.248Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T18:15:04.248Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:15:04.248Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T18:15:04.248Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T18:15:04.248Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:15:04.248Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T18:15:04.248Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T18:15:04.255Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T18:15:04.255Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T18:15:04.280Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T18:15:04.281Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T18:15:04.282Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T18:15:04.283Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T18:15:04.284Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T18:15:04.284Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T18:15:04.285Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T18:15:04.286Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T18:15:04.286Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T18:15:04.286Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T18:15:04.286Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T18:15:04.286Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T18:15:04.286Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T18:15:04.286Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T18:15:04.286Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T18:15:04.286Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T18:15:04.286Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T18:15:04.286Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T18:15:04.286Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T18:15:04.286Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T18:15:04.286Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T18:15:04.299Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T18:15:04.299Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T18:15:04.300Z ‚úÖ [PID:85836] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:15:04.300Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:15:04.300Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T18:15:04.300Z üöó Car Crash Lawyer AI - Server Ready [PID:85836]
[36m[INFO][0m 2025-11-17T18:15:04.300Z ============================================================
[32m[SUCCESS][0m 2025-11-17T18:15:04.300Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:15:04.300Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:15:04.300Z 
üìä Services:
[36m[INFO][0m 2025-11-17T18:15:04.300Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T18:15:04.300Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T18:15:04.300Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T18:15:04.300Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T18:15:04.300Z ============================================================

[32m[SUCCESS][0m 2025-11-17T18:15:04.584Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T18:15:04.847Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T18:15:04.909Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T18:15:05.269Z ‚úÖ OpenAI connected
[32m[SUCCESS][0m 2025-11-17T18:15:05.305Z ‚úÖ Health check passed: 200
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:85977] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:85977] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T18:17:10.119Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T18:17:10.324Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T18:17:10.351Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T18:17:10.442Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T18:17:10.444Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T18:17:10.452Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T18:17:10.453Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T18:17:10.453Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T18:17:10.453Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T18:17:10.453Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T18:17:10.453Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:17:10.453Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T18:17:10.453Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T18:17:10.453Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:17:10.453Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T18:17:10.453Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T18:17:10.460Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T18:17:10.460Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T18:17:10.472Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T18:17:10.473Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T18:17:10.474Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T18:17:10.475Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T18:17:10.475Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T18:17:10.476Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T18:17:10.477Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T18:17:10.478Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T18:17:10.478Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T18:17:10.478Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T18:17:10.478Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T18:17:10.478Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T18:17:10.478Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T18:17:10.478Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T18:17:10.478Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T18:17:10.478Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T18:17:10.478Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T18:17:10.478Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T18:17:10.478Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T18:17:10.478Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T18:17:10.478Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T18:17:10.491Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T18:17:10.491Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T18:17:10.492Z ‚úÖ [PID:85977] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:17:10.492Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:17:10.492Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T18:17:10.492Z üöó Car Crash Lawyer AI - Server Ready [PID:85977]
[36m[INFO][0m 2025-11-17T18:17:10.492Z ============================================================
[32m[SUCCESS][0m 2025-11-17T18:17:10.492Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:17:10.492Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:17:10.492Z 
üìä Services:
[36m[INFO][0m 2025-11-17T18:17:10.492Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T18:17:10.492Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T18:17:10.492Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T18:17:10.492Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T18:17:10.492Z ============================================================

[32m[SUCCESS][0m 2025-11-17T18:17:10.723Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T18:17:10.873Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T18:17:11.069Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T18:17:11.505Z ‚úÖ Health check passed: 200
[32m[SUCCESS][0m 2025-11-17T18:17:11.644Z ‚úÖ OpenAI connected
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:86164] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:86164] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T18:21:15.695Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T18:21:15.926Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T18:21:15.954Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T18:21:16.051Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T18:21:16.053Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T18:21:16.059Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T18:21:16.061Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T18:21:16.061Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T18:21:16.061Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T18:21:16.061Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T18:21:16.061Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:21:16.061Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T18:21:16.061Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T18:21:16.061Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:21:16.061Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T18:21:16.061Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T18:21:16.067Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T18:21:16.067Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T18:21:16.081Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T18:21:16.082Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T18:21:16.083Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T18:21:16.084Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T18:21:16.085Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T18:21:16.086Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T18:21:16.087Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T18:21:16.088Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T18:21:16.088Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T18:21:16.088Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T18:21:16.088Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T18:21:16.088Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T18:21:16.088Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T18:21:16.088Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T18:21:16.088Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T18:21:16.088Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T18:21:16.088Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T18:21:16.088Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T18:21:16.088Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T18:21:16.088Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T18:21:16.088Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T18:21:16.104Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T18:21:16.104Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T18:21:16.106Z ‚ùå [PID:86164] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T18:21:16.106Z üí° [PID:86164] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T18:21:16.106Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T18:21:16.106Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:86874] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:86874] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T18:35:01.639Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T18:35:01.853Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T18:35:01.879Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T18:35:01.967Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T18:35:01.968Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T18:35:01.975Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T18:35:01.976Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T18:35:01.976Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T18:35:01.976Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T18:35:01.976Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T18:35:01.976Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:35:01.976Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T18:35:01.976Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T18:35:01.976Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:35:01.976Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T18:35:01.976Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T18:35:01.983Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T18:35:01.983Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T18:35:01.994Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T18:35:01.994Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T18:35:01.995Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T18:35:01.996Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T18:35:01.997Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T18:35:01.998Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T18:35:01.998Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T18:35:01.999Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T18:35:01.999Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T18:35:01.999Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T18:35:01.999Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T18:35:01.999Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T18:35:01.999Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T18:35:01.999Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T18:35:02.000Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T18:35:02.000Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T18:35:02.000Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T18:35:02.000Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T18:35:02.000Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T18:35:02.000Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T18:35:02.000Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T18:35:02.012Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T18:35:02.012Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T18:35:02.013Z ‚úÖ [PID:86874] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:35:02.013Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:35:02.013Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T18:35:02.013Z üöó Car Crash Lawyer AI - Server Ready [PID:86874]
[36m[INFO][0m 2025-11-17T18:35:02.013Z ============================================================
[32m[SUCCESS][0m 2025-11-17T18:35:02.013Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:35:02.013Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T18:35:02.013Z 
üìä Services:
[36m[INFO][0m 2025-11-17T18:35:02.013Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T18:35:02.013Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T18:35:02.013Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T18:35:02.013Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T18:35:02.013Z ============================================================

[32m[SUCCESS][0m 2025-11-17T18:35:05.471Z ‚úÖ Health check passed: 200
[32m[SUCCESS][0m 2025-11-17T18:35:06.199Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T18:35:06.847Z ‚úÖ DVLA connected
[33m[WARN][0m 2025-11-17T18:35:07.014Z ‚ö†Ô∏è OpenAI failed
[32m[SUCCESS][0m 2025-11-17T18:35:07.644Z ‚úÖ Supabase connected
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:87472] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:87472] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T18:51:06.367Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T18:51:06.580Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T18:51:06.606Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T18:51:06.697Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T18:51:06.698Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T18:51:06.705Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T18:51:06.706Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T18:51:06.707Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T18:51:06.707Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T18:51:06.707Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T18:51:06.707Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:51:06.707Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T18:51:06.707Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T18:51:06.707Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:51:06.707Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T18:51:06.707Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T18:51:06.713Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T18:51:06.713Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T18:51:06.725Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T18:51:06.726Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T18:51:06.727Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T18:51:06.727Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T18:51:06.728Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T18:51:06.729Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T18:51:06.730Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T18:51:06.731Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T18:51:06.731Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T18:51:06.731Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T18:51:06.731Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T18:51:06.731Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T18:51:06.731Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T18:51:06.731Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T18:51:06.731Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T18:51:06.731Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T18:51:06.731Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T18:51:06.731Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T18:51:06.731Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T18:51:06.731Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T18:51:06.731Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T18:51:06.744Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T18:51:06.744Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T18:51:06.745Z ‚ùå [PID:87472] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T18:51:06.745Z üí° [PID:87472] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T18:51:06.745Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T18:51:06.745Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:87929] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:87929] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T18:59:21.329Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T18:59:21.539Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T18:59:21.564Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T18:59:21.654Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T18:59:21.655Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T18:59:21.662Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T18:59:21.663Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T18:59:21.663Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T18:59:21.663Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T18:59:21.663Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T18:59:21.663Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:59:21.663Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T18:59:21.663Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T18:59:21.663Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T18:59:21.663Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T18:59:21.664Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T18:59:21.670Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T18:59:21.670Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T18:59:21.694Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T18:59:21.695Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T18:59:21.695Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T18:59:21.696Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T18:59:21.697Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T18:59:21.698Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T18:59:21.698Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T18:59:21.699Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T18:59:21.699Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T18:59:21.699Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T18:59:21.699Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T18:59:21.699Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T18:59:21.699Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T18:59:21.699Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T18:59:21.699Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T18:59:21.699Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T18:59:21.699Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T18:59:21.699Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T18:59:21.699Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T18:59:21.699Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T18:59:21.699Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T18:59:21.712Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T18:59:21.712Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T18:59:21.713Z ‚ùå [PID:87929] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T18:59:21.714Z üí° [PID:87929] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T18:59:21.714Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T18:59:21.714Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:89362] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:89362] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T19:44:33.472Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T19:44:33.693Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T19:44:33.720Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T19:44:33.810Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T19:44:33.812Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T19:44:33.818Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T19:44:33.819Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T19:44:33.819Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T19:44:33.819Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T19:44:33.819Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T19:44:33.819Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T19:44:33.819Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T19:44:33.819Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T19:44:33.819Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T19:44:33.819Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T19:44:33.819Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T19:44:33.826Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T19:44:33.826Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T19:44:33.851Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T19:44:33.852Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T19:44:33.853Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T19:44:33.854Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T19:44:33.855Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T19:44:33.855Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T19:44:33.856Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T19:44:33.857Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T19:44:33.857Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T19:44:33.857Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T19:44:33.857Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T19:44:33.857Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T19:44:33.857Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T19:44:33.857Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T19:44:33.857Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T19:44:33.857Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T19:44:33.857Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T19:44:33.857Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T19:44:33.857Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T19:44:33.857Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T19:44:33.857Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T19:44:33.869Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T19:44:33.870Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T19:44:33.871Z ‚ùå [PID:89362] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T19:44:33.871Z üí° [PID:89362] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T19:44:33.871Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T19:44:33.871Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:89998] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:89998] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T20:01:30.242Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T20:01:30.451Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T20:01:30.477Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T20:01:30.572Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T20:01:30.574Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T20:01:30.581Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T20:01:30.582Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T20:01:30.582Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T20:01:30.582Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T20:01:30.582Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T20:01:30.582Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:01:30.582Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T20:01:30.582Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T20:01:30.582Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:01:30.582Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T20:01:30.582Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T20:01:30.589Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T20:01:30.589Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T20:01:30.601Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T20:01:30.603Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T20:01:30.605Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T20:01:30.606Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T20:01:30.607Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T20:01:30.608Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T20:01:30.609Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T20:01:30.609Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T20:01:30.609Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T20:01:30.609Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T20:01:30.610Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T20:01:30.610Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T20:01:30.610Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T20:01:30.610Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T20:01:30.610Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T20:01:30.610Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T20:01:30.610Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T20:01:30.610Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T20:01:30.610Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T20:01:30.610Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T20:01:30.610Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T20:01:30.623Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T20:01:30.623Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T20:01:30.624Z ‚úÖ [PID:89998] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:01:30.624Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:01:30.624Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T20:01:30.624Z üöó Car Crash Lawyer AI - Server Ready [PID:89998]
[36m[INFO][0m 2025-11-17T20:01:30.624Z ============================================================
[32m[SUCCESS][0m 2025-11-17T20:01:30.624Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:01:30.624Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:01:30.624Z 
üìä Services:
[36m[INFO][0m 2025-11-17T20:01:30.624Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T20:01:30.624Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T20:01:30.624Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T20:01:30.624Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T20:01:30.624Z ============================================================

[32m[SUCCESS][0m 2025-11-17T20:01:30.827Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T20:01:30.947Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T20:01:31.044Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T20:01:31.640Z ‚úÖ Health check passed: 200
[32m[SUCCESS][0m 2025-11-17T20:01:31.863Z ‚úÖ OpenAI connected
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:90122] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:90122] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T20:01:56.485Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T20:01:56.571Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T20:01:56.582Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T20:01:56.653Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T20:01:56.654Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T20:01:56.660Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T20:01:56.661Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T20:01:56.662Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T20:01:56.662Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T20:01:56.662Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T20:01:56.662Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:01:56.662Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T20:01:56.662Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T20:01:56.662Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:01:56.662Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T20:01:56.662Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T20:01:56.667Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T20:01:56.667Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T20:01:56.679Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T20:01:56.680Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T20:01:56.681Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T20:01:56.682Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T20:01:56.683Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T20:01:56.684Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T20:01:56.684Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T20:01:56.685Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T20:01:56.685Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T20:01:56.685Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T20:01:56.685Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T20:01:56.685Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T20:01:56.685Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T20:01:56.685Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T20:01:56.685Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T20:01:56.685Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T20:01:56.685Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T20:01:56.685Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T20:01:56.685Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T20:01:56.685Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T20:01:56.685Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T20:01:56.698Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T20:01:56.698Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T20:01:56.699Z ‚úÖ [PID:90122] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:01:56.699Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:01:56.700Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T20:01:56.700Z üöó Car Crash Lawyer AI - Server Ready [PID:90122]
[36m[INFO][0m 2025-11-17T20:01:56.700Z ============================================================
[32m[SUCCESS][0m 2025-11-17T20:01:56.700Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:01:56.700Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:01:56.700Z 
üìä Services:
[36m[INFO][0m 2025-11-17T20:01:56.700Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T20:01:56.700Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T20:01:56.700Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T20:01:56.700Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T20:01:56.700Z ============================================================

[32m[SUCCESS][0m 2025-11-17T20:01:56.865Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T20:01:56.944Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T20:01:57.106Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T20:01:57.424Z ‚úÖ OpenAI connected
[32m[SUCCESS][0m 2025-11-17T20:01:57.716Z ‚úÖ Health check passed: 200
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:90868] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:90868] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T20:10:49.122Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T20:10:49.327Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T20:10:49.354Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T20:10:49.436Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T20:10:49.437Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[31m[ERROR][0m 2025-11-17T20:10:49.439Z Uncaught Exception in agent service: {"message":"authenticateToken is not defined","stack":"ReferenceError: authenticateToken is not defined\n    at Object.<anonymous> (/Users/ianring/Node.js/src/routes/safety.routes.js:21:31)\n    at Module._compile (node:internal/modules/cjs/loader:1760:14)\n    at Object..js (node:internal/modules/cjs/loader:1893:10)\n    at Module.load (node:internal/modules/cjs/loader:1480:32)\n    at Module._load (node:internal/modules/cjs/loader:1299:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:328:14)\n    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)\n    at Module.require (node:internal/modules/cjs/loader:1503:12)\n    at require (node:internal/modules/helpers:152:16)\n    at Object.<anonymous> (/Users/ianring/Node.js/src/routes/index.js:30:22)"}
[32m[nodemon] clean exit - waiting for changes before restart[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:90887] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:90887] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T20:10:59.156Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T20:10:59.279Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T20:10:59.296Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T20:10:59.340Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T20:10:59.341Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[31m[ERROR][0m 2025-11-17T20:10:59.342Z Uncaught Exception in agent service: {"message":"authenticateToken is not defined","stack":"ReferenceError: authenticateToken is not defined\n    at Object.<anonymous> (/Users/ianring/Node.js/src/routes/safety.routes.js:33:38)\n    at Module._compile (node:internal/modules/cjs/loader:1760:14)\n    at Object..js (node:internal/modules/cjs/loader:1893:10)\n    at Module.load (node:internal/modules/cjs/loader:1480:32)\n    at Module._load (node:internal/modules/cjs/loader:1299:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:328:14)\n    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)\n    at Module.require (node:internal/modules/cjs/loader:1503:12)\n    at require (node:internal/modules/helpers:152:16)\n    at Object.<anonymous> (/Users/ianring/Node.js/src/routes/index.js:30:22)"}
[32m[nodemon] clean exit - waiting for changes before restart[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:90908] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:90908] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T20:11:05.630Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T20:11:05.729Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T20:11:05.742Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T20:11:05.790Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T20:11:05.791Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[31m[ERROR][0m 2025-11-17T20:11:05.791Z Uncaught Exception in agent service: {"message":"authenticateToken is not defined","stack":"ReferenceError: authenticateToken is not defined\n    at Object.<anonymous> (/Users/ianring/Node.js/src/routes/safety.routes.js:45:38)\n    at Module._compile (node:internal/modules/cjs/loader:1760:14)\n    at Object..js (node:internal/modules/cjs/loader:1893:10)\n    at Module.load (node:internal/modules/cjs/loader:1480:32)\n    at Module._load (node:internal/modules/cjs/loader:1299:12)\n    at TracingChannel.traceSync (node:diagnostics_channel:328:14)\n    at wrapModuleLoad (node:internal/modules/cjs/loader:244:24)\n    at Module.require (node:internal/modules/cjs/loader:1503:12)\n    at require (node:internal/modules/helpers:152:16)\n    at Object.<anonymous> (/Users/ianring/Node.js/src/routes/index.js:30:22)"}
[32m[nodemon] clean exit - waiting for changes before restart[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:90950] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:90950] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T20:11:11.928Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T20:11:12.021Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T20:11:12.033Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T20:11:12.077Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T20:11:12.078Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T20:11:12.084Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T20:11:12.085Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T20:11:12.086Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T20:11:12.086Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T20:11:12.086Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T20:11:12.086Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:11:12.086Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T20:11:12.086Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T20:11:12.086Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:11:12.086Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T20:11:12.086Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T20:11:12.092Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T20:11:12.092Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T20:11:12.103Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T20:11:12.104Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T20:11:12.105Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T20:11:12.105Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T20:11:12.106Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T20:11:12.107Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T20:11:12.108Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T20:11:12.109Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T20:11:12.109Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T20:11:12.109Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T20:11:12.109Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T20:11:12.109Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T20:11:12.109Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T20:11:12.109Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T20:11:12.109Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T20:11:12.109Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T20:11:12.109Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T20:11:12.109Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T20:11:12.109Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T20:11:12.109Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T20:11:12.109Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T20:11:12.123Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T20:11:12.123Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T20:11:12.124Z ‚úÖ [PID:90950] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:11:12.124Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:11:12.124Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T20:11:12.124Z üöó Car Crash Lawyer AI - Server Ready [PID:90950]
[36m[INFO][0m 2025-11-17T20:11:12.124Z ============================================================
[32m[SUCCESS][0m 2025-11-17T20:11:12.124Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:11:12.124Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:11:12.124Z 
üìä Services:
[36m[INFO][0m 2025-11-17T20:11:12.124Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T20:11:12.124Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T20:11:12.124Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T20:11:12.124Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T20:11:12.124Z ============================================================

[32m[SUCCESS][0m 2025-11-17T20:11:12.409Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T20:11:12.539Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T20:11:13.138Z ‚úÖ Health check passed: 200
[32m[SUCCESS][0m 2025-11-17T20:11:13.268Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T20:11:13.275Z ‚úÖ OpenAI connected
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:91247] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:91247] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T20:13:40.669Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T20:13:40.876Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T20:13:40.900Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T20:13:40.990Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T20:13:40.991Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T20:13:40.998Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T20:13:40.999Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T20:13:40.999Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T20:13:40.999Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T20:13:40.999Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T20:13:40.999Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:13:40.999Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T20:13:40.999Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T20:13:40.999Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:13:40.999Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T20:13:40.999Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T20:13:41.006Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T20:13:41.006Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T20:13:41.016Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T20:13:41.017Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T20:13:41.018Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T20:13:41.019Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T20:13:41.020Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T20:13:41.020Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T20:13:41.021Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T20:13:41.022Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T20:13:41.022Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T20:13:41.022Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T20:13:41.022Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T20:13:41.022Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T20:13:41.022Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T20:13:41.022Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T20:13:41.022Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T20:13:41.022Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T20:13:41.022Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T20:13:41.022Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T20:13:41.022Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T20:13:41.022Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T20:13:41.022Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T20:13:41.035Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T20:13:41.035Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T20:13:41.036Z ‚úÖ [PID:91247] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:13:41.036Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:13:41.037Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T20:13:41.037Z üöó Car Crash Lawyer AI - Server Ready [PID:91247]
[36m[INFO][0m 2025-11-17T20:13:41.037Z ============================================================
[32m[SUCCESS][0m 2025-11-17T20:13:41.037Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:13:41.037Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T20:13:41.037Z 
üìä Services:
[36m[INFO][0m 2025-11-17T20:13:41.037Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T20:13:41.037Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T20:13:41.037Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T20:13:41.037Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T20:13:41.037Z ============================================================

[32m[SUCCESS][0m 2025-11-17T20:13:41.495Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T20:13:41.521Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T20:13:41.679Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T20:13:42.054Z ‚úÖ Health check passed: 200
[32m[SUCCESS][0m 2025-11-17T20:13:42.717Z ‚úÖ OpenAI connected
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:91362] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:91362] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T20:37:13.598Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T20:37:13.772Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T20:37:13.795Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T20:37:13.867Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T20:37:13.868Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T20:37:13.874Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T20:37:13.875Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T20:37:13.876Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T20:37:13.876Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T20:37:13.876Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T20:37:13.876Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:37:13.876Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T20:37:13.876Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T20:37:13.876Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T20:37:13.876Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T20:37:13.876Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T20:37:13.881Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T20:37:13.881Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T20:37:13.891Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T20:37:13.892Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T20:37:13.893Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T20:37:13.894Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T20:37:13.895Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T20:37:13.895Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T20:37:13.896Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T20:37:13.897Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T20:37:13.897Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T20:37:13.897Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T20:37:13.897Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T20:37:13.897Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T20:37:13.897Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T20:37:13.897Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T20:37:13.897Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T20:37:13.897Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T20:37:13.897Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T20:37:13.897Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T20:37:13.897Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T20:37:13.897Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T20:37:13.897Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T20:37:13.910Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T20:37:13.910Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T20:37:13.911Z ‚ùå [PID:91362] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T20:37:13.911Z üí° [PID:91362] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T20:37:13.911Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T20:37:13.911Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:92149] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:92149] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T22:30:44.918Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T22:30:45.134Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T22:30:45.160Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T22:30:45.251Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T22:30:45.252Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T22:30:45.258Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T22:30:45.260Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T22:30:45.260Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T22:30:45.260Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T22:30:45.260Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T22:30:45.260Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:30:45.260Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T22:30:45.260Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T22:30:45.260Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:30:45.260Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T22:30:45.260Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T22:30:45.267Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T22:30:45.267Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T22:30:45.293Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T22:30:45.293Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T22:30:45.294Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T22:30:45.295Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T22:30:45.296Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T22:30:45.297Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T22:30:45.297Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T22:30:45.298Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T22:30:45.298Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T22:30:45.298Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T22:30:45.298Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T22:30:45.298Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T22:30:45.298Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T22:30:45.298Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T22:30:45.298Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T22:30:45.298Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T22:30:45.298Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T22:30:45.298Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T22:30:45.298Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T22:30:45.298Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T22:30:45.298Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T22:30:45.312Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T22:30:45.312Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T22:30:45.313Z ‚ùå [PID:92149] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T22:30:45.313Z üí° [PID:92149] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T22:30:45.313Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T22:30:45.313Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:93058] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:93058] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T22:54:57.817Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T22:54:58.026Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T22:54:58.053Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T22:54:58.137Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T22:54:58.138Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T22:54:58.146Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T22:54:58.147Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T22:54:58.147Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T22:54:58.147Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T22:54:58.147Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T22:54:58.147Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:54:58.147Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T22:54:58.147Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T22:54:58.147Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:54:58.147Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T22:54:58.147Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T22:54:58.154Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T22:54:58.154Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T22:54:58.180Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T22:54:58.181Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T22:54:58.182Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T22:54:58.183Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T22:54:58.183Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T22:54:58.184Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T22:54:58.185Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T22:54:58.186Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T22:54:58.186Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T22:54:58.186Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T22:54:58.186Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T22:54:58.186Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T22:54:58.186Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T22:54:58.186Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T22:54:58.186Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T22:54:58.186Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T22:54:58.186Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T22:54:58.186Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T22:54:58.186Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T22:54:58.186Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T22:54:58.186Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T22:54:58.200Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T22:54:58.200Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T22:54:58.201Z ‚ùå [PID:93058] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T22:54:58.202Z üí° [PID:93058] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T22:54:58.202Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T22:54:58.202Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:93277] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:93277] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T22:56:04.662Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T22:56:04.755Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T22:56:04.767Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T22:56:04.809Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T22:56:04.810Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T22:56:04.813Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T22:56:04.814Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T22:56:04.815Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T22:56:04.815Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T22:56:04.815Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T22:56:04.815Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:56:04.815Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T22:56:04.815Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T22:56:04.815Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:56:04.815Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T22:56:04.815Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T22:56:04.817Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T22:56:04.817Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T22:56:04.828Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T22:56:04.829Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T22:56:04.829Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T22:56:04.830Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T22:56:04.831Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T22:56:04.831Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T22:56:04.832Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T22:56:04.833Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T22:56:04.833Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T22:56:04.833Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T22:56:04.833Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T22:56:04.833Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T22:56:04.833Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T22:56:04.833Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T22:56:04.833Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T22:56:04.833Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T22:56:04.833Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T22:56:04.833Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T22:56:04.833Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T22:56:04.833Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T22:56:04.833Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T22:56:04.845Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T22:56:04.845Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T22:56:04.846Z ‚úÖ [PID:93277] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T22:56:04.846Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T22:56:04.846Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T22:56:04.846Z üöó Car Crash Lawyer AI - Server Ready [PID:93277]
[36m[INFO][0m 2025-11-17T22:56:04.846Z ============================================================
[32m[SUCCESS][0m 2025-11-17T22:56:04.846Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T22:56:04.846Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T22:56:04.846Z 
üìä Services:
[36m[INFO][0m 2025-11-17T22:56:04.846Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T22:56:04.846Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T22:56:04.846Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T22:56:04.846Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T22:56:04.846Z ============================================================

[32m[SUCCESS][0m 2025-11-17T22:56:05.105Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T22:56:05.241Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T22:56:05.283Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T22:56:05.863Z ‚úÖ Health check passed: 200
[32m[SUCCESS][0m 2025-11-17T22:56:06.026Z ‚úÖ OpenAI connected
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:93488] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:93488] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T22:57:01.865Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T22:57:02.072Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T22:57:02.096Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T22:57:02.170Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T22:57:02.171Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [ 'updateSafetyStatus', 'getSafetyStatus', 'mapSafetyStatusToBoolean' ]
[36m[INFO][0m 2025-11-17T22:57:02.177Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T22:57:02.178Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T22:57:02.178Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T22:57:02.178Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T22:57:02.178Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T22:57:02.178Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:57:02.178Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T22:57:02.178Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T22:57:02.178Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:57:02.178Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T22:57:02.178Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T22:57:02.183Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T22:57:02.183Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T22:57:02.194Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T22:57:02.195Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T22:57:02.196Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T22:57:02.197Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T22:57:02.197Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T22:57:02.198Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T22:57:02.199Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T22:57:02.200Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T22:57:02.200Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T22:57:02.200Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T22:57:02.200Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T22:57:02.200Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T22:57:02.200Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T22:57:02.200Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T22:57:02.200Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T22:57:02.200Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T22:57:02.200Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T22:57:02.200Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T22:57:02.200Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T22:57:02.200Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T22:57:02.200Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T22:57:02.211Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T22:57:02.211Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T22:57:02.213Z ‚ùå [PID:93488] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T22:57:02.213Z üí° [PID:93488] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T22:57:02.213Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T22:57:02.213Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:93630] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:93630] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T22:59:35.076Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T22:59:35.280Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T22:59:35.305Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T22:59:35.388Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T22:59:35.389Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T22:59:35.396Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T22:59:35.397Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T22:59:35.397Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T22:59:35.397Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T22:59:35.397Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T22:59:35.397Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:59:35.397Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T22:59:35.397Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T22:59:35.397Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T22:59:35.397Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T22:59:35.398Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T22:59:35.404Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T22:59:35.404Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T22:59:35.414Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T22:59:35.415Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T22:59:35.416Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T22:59:35.416Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T22:59:35.417Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T22:59:35.418Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T22:59:35.419Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T22:59:35.419Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T22:59:35.420Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T22:59:35.420Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T22:59:35.420Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T22:59:35.420Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T22:59:35.420Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T22:59:35.420Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T22:59:35.420Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T22:59:35.420Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T22:59:35.420Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T22:59:35.420Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T22:59:35.420Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T22:59:35.420Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T22:59:35.420Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T22:59:35.432Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T22:59:35.432Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T22:59:35.433Z ‚ùå [PID:93630] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T22:59:35.433Z üí° [PID:93630] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T22:59:35.433Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T22:59:35.433Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:93719] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:93719] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:00:15.899Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:00:16.104Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:00:16.133Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:00:16.220Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:00:16.221Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:00:16.228Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:00:16.229Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:00:16.229Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:00:16.229Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:00:16.229Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:00:16.229Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:00:16.229Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:00:16.229Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:00:16.229Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:00:16.229Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:00:16.229Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:00:16.236Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:00:16.236Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:00:16.246Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:00:16.247Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:00:16.248Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:00:16.249Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:00:16.250Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:00:16.250Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:00:16.251Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:00:16.252Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:00:16.252Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:00:16.252Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:00:16.252Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:00:16.252Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:00:16.252Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:00:16.252Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:00:16.252Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:00:16.252Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:00:16.252Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:00:16.252Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:00:16.252Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:00:16.252Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:00:16.252Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:00:16.265Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:00:16.265Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T23:00:16.266Z ‚úÖ [PID:93719] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:00:16.266Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:00:16.266Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T23:00:16.266Z üöó Car Crash Lawyer AI - Server Ready [PID:93719]
[36m[INFO][0m 2025-11-17T23:00:16.266Z ============================================================
[32m[SUCCESS][0m 2025-11-17T23:00:16.266Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:00:16.266Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:00:16.266Z 
üìä Services:
[36m[INFO][0m 2025-11-17T23:00:16.266Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T23:00:16.266Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T23:00:16.267Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T23:00:16.267Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T23:00:16.267Z ============================================================

[32m[SUCCESS][0m 2025-11-17T23:00:16.445Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T23:00:16.504Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T23:00:16.549Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T23:00:16.960Z ‚úÖ OpenAI connected
[32m[SUCCESS][0m 2025-11-17T23:00:17.284Z ‚úÖ Health check passed: 200
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:93826] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:93826] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:00:21.717Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:00:21.811Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:00:21.821Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:00:21.868Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:00:21.868Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:00:21.872Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:00:21.874Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:00:21.874Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:00:21.874Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:00:21.874Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:00:21.874Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:00:21.874Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:00:21.874Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:00:21.874Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:00:21.874Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:00:21.874Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:00:21.876Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:00:21.876Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:00:21.886Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:00:21.888Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:00:21.888Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:00:21.889Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:00:21.890Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:00:21.891Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:00:21.892Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:00:21.892Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:00:21.892Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:00:21.892Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:00:21.892Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:00:21.892Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:00:21.892Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:00:21.892Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:00:21.892Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:00:21.892Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:00:21.892Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:00:21.892Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:00:21.892Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:00:21.892Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:00:21.892Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:00:21.906Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:00:21.906Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T23:00:21.907Z ‚ùå [PID:93826] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T23:00:21.907Z üí° [PID:93826] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T23:00:21.907Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T23:00:21.907Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:94558] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:94558] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:22:07.966Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:22:08.180Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:22:08.206Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:22:08.292Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:22:08.293Z Insurance API not configured - insurance lookups will be skipped
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:22:08.300Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:22:08.301Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:22:08.301Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:22:08.301Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:22:08.301Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:22:08.301Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:22:08.301Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:22:08.301Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:22:08.301Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:22:08.301Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:22:08.301Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:22:08.308Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:22:08.308Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:22:08.330Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:22:08.331Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:22:08.332Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:22:08.333Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:22:08.334Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:22:08.334Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:22:08.335Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:22:08.336Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:22:08.336Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:22:08.336Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:22:08.336Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:22:08.336Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:22:08.336Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:22:08.336Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:22:08.336Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:22:08.336Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:22:08.336Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:22:08.336Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:22:08.336Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:22:08.336Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:22:08.336Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:22:08.348Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:22:08.348Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T23:22:08.350Z ‚úÖ [PID:94558] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:22:08.350Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:22:08.350Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T23:22:08.350Z üöó Car Crash Lawyer AI - Server Ready [PID:94558]
[36m[INFO][0m 2025-11-17T23:22:08.350Z ============================================================
[32m[SUCCESS][0m 2025-11-17T23:22:08.350Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:22:08.350Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:22:08.350Z 
üìä Services:
[36m[INFO][0m 2025-11-17T23:22:08.350Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T23:22:08.350Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T23:22:08.350Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T23:22:08.350Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T23:22:08.350Z ============================================================

[32m[SUCCESS][0m 2025-11-17T23:22:08.524Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T23:22:08.692Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T23:22:09.103Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T23:22:09.364Z ‚úÖ Health check passed: 200
[32m[SUCCESS][0m 2025-11-17T23:22:10.542Z ‚úÖ OpenAI connected
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:94739] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:94739] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:24:24.120Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:24:24.323Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:24:24.348Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:24:24.434Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:24:24.435Z Insurance API not configured - insurance lookups will be skipped
DEBUG: getMyStatus function type: function
DEBUG: Functions before export: {
  updateSafetyStatus: 'function',
  getSafetyStatus: 'function',
  getMyStatus: 'function',
  mapSafetyStatusToBoolean: 'function'
}
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:24:24.442Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:24:24.443Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:24:24.443Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:24:24.443Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:24:24.443Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:24:24.443Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:24:24.443Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:24:24.443Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:24:24.443Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:24:24.443Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:24:24.443Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:24:24.449Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:24:24.449Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:24:24.460Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:24:24.461Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:24:24.461Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:24:24.462Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:24:24.463Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:24:24.464Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:24:24.465Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:24:24.466Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:24:24.466Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:24:24.466Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:24:24.466Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:24:24.466Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:24:24.466Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:24:24.466Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:24:24.466Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:24:24.466Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:24:24.466Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:24:24.466Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:24:24.466Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:24:24.466Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:24:24.466Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:24:24.480Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:24:24.480Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T23:24:24.481Z ‚ùå [PID:94739] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T23:24:24.482Z üí° [PID:94739] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T23:24:24.482Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T23:24:24.482Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:95515] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:95515] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:32:46.918Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:32:47.134Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:32:47.160Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:32:47.245Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:32:47.247Z Insurance API not configured - insurance lookups will be skipped
üîç SAFETY CONTROLLER: Starting module load
üîç SAFETY CONTROLLER: Supabase client created
DEBUG: getMyStatus function type: function
DEBUG: Functions before export: {
  updateSafetyStatus: 'function',
  getSafetyStatus: 'function',
  getMyStatus: 'function',
  mapSafetyStatusToBoolean: 'function'
}
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:32:47.254Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:32:47.255Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:32:47.255Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:32:47.255Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:32:47.255Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:32:47.255Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:32:47.255Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:32:47.255Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:32:47.255Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:32:47.255Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:32:47.255Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:32:47.262Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:32:47.262Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:32:47.273Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:32:47.274Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:32:47.274Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:32:47.275Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:32:47.276Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:32:47.277Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:32:47.277Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:32:47.278Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:32:47.278Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:32:47.278Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:32:47.278Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:32:47.278Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:32:47.278Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:32:47.278Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:32:47.278Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:32:47.278Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:32:47.278Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:32:47.278Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:32:47.278Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:32:47.278Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:32:47.278Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:32:47.291Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:32:47.291Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T23:32:47.293Z ‚ùå [PID:95515] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T23:32:47.293Z üí° [PID:95515] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T23:32:47.293Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T23:32:47.293Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:95698] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:95698] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:35:22.743Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:35:22.925Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:35:22.949Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:35:23.023Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:35:23.025Z Insurance API not configured - insurance lookups will be skipped
üîç SAFETY CONTROLLER: Starting module load
üîç SAFETY CONTROLLER: Supabase client created
üîç SAFETY CONTROLLER: About to define mapSafetyStatusToBoolean
DEBUG: getMyStatus function type: function
DEBUG: Functions before export: {
  updateSafetyStatus: 'function',
  getSafetyStatus: 'function',
  getMyStatus: 'function',
  mapSafetyStatusToBoolean: 'function'
}
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:35:23.031Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:35:23.032Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:35:23.032Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:35:23.032Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:35:23.032Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:35:23.032Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:35:23.032Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:35:23.032Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:35:23.032Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:35:23.032Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:35:23.032Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:35:23.037Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:35:23.037Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:35:23.048Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:35:23.049Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:35:23.050Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:35:23.051Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:35:23.052Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:35:23.052Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:35:23.053Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:35:23.054Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:35:23.054Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:35:23.054Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:35:23.054Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:35:23.054Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:35:23.054Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:35:23.054Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:35:23.054Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:35:23.054Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:35:23.054Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:35:23.054Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:35:23.054Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:35:23.054Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:35:23.054Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:35:23.066Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:35:23.066Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T23:35:23.068Z ‚ùå [PID:95698] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T23:35:23.068Z üí° [PID:95698] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T23:35:23.068Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T23:35:23.068Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:95797] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:95797] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:35:30.928Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:35:31.027Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:35:31.041Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:35:31.093Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:35:31.094Z Insurance API not configured - insurance lookups will be skipped
üîç SAFETY CONTROLLER: Starting module load
üîç SAFETY CONTROLLER: Supabase client created
üîç SAFETY CONTROLLER: About to define mapSafetyStatusToBoolean
üîç SAFETY CONTROLLER: mapSafetyStatusToBoolean defined
üîç SAFETY CONTROLLER: About to define updateSafetyStatus
DEBUG: getMyStatus function type: function
DEBUG: Functions before export: {
  updateSafetyStatus: 'function',
  getSafetyStatus: 'function',
  getMyStatus: 'function',
  mapSafetyStatusToBoolean: 'function'
}
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:35:31.097Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:35:31.098Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:35:31.099Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:35:31.099Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:35:31.099Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:35:31.099Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:35:31.099Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:35:31.099Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:35:31.099Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:35:31.099Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:35:31.099Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:35:31.102Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:35:31.102Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:35:31.114Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:35:31.114Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:35:31.115Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:35:31.116Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:35:31.117Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:35:31.118Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:35:31.118Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:35:31.119Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:35:31.119Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:35:31.119Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:35:31.119Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:35:31.119Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:35:31.119Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:35:31.119Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:35:31.119Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:35:31.119Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:35:31.119Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:35:31.119Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:35:31.119Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:35:31.119Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:35:31.119Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:35:31.132Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:35:31.132Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T23:35:31.133Z ‚úÖ [PID:95797] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:35:31.133Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:35:31.133Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T23:35:31.133Z üöó Car Crash Lawyer AI - Server Ready [PID:95797]
[36m[INFO][0m 2025-11-17T23:35:31.133Z ============================================================
[32m[SUCCESS][0m 2025-11-17T23:35:31.133Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:35:31.133Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:35:31.133Z 
üìä Services:
[36m[INFO][0m 2025-11-17T23:35:31.133Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T23:35:31.133Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T23:35:31.133Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T23:35:31.133Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T23:35:31.133Z ============================================================

[32m[SUCCESS][0m 2025-11-17T23:35:31.360Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T23:35:31.462Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T23:35:31.515Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T23:35:31.912Z ‚úÖ OpenAI connected
[32m[SUCCESS][0m 2025-11-17T23:35:32.147Z ‚úÖ Health check passed: 200
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:95907] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:95907] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:35:42.571Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:35:42.747Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:35:42.770Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:35:42.847Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:35:42.848Z Insurance API not configured - insurance lookups will be skipped
üîç SAFETY CONTROLLER: Starting module load
üîç SAFETY CONTROLLER: Supabase client created
üîç SAFETY CONTROLLER: About to define mapSafetyStatusToBoolean
üîç SAFETY CONTROLLER: mapSafetyStatusToBoolean defined
üîç SAFETY CONTROLLER: About to define updateSafetyStatus
üîç SAFETY CONTROLLER: updateSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getSafetyStatus
DEBUG: getMyStatus function type: function
DEBUG: Functions before export: {
  updateSafetyStatus: 'function',
  getSafetyStatus: 'function',
  getMyStatus: 'function',
  mapSafetyStatusToBoolean: 'function'
}
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:35:42.854Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:35:42.855Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:35:42.855Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:35:42.856Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:35:42.856Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:35:42.856Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:35:42.856Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:35:42.856Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:35:42.856Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:35:42.856Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:35:42.856Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:35:42.860Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:35:42.860Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:35:42.872Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:35:42.873Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:35:42.874Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:35:42.874Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:35:42.875Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:35:42.876Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:35:42.877Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:35:42.877Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:35:42.877Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:35:42.877Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:35:42.877Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:35:42.877Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:35:42.877Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:35:42.878Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:35:42.878Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:35:42.878Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:35:42.878Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:35:42.878Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:35:42.878Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:35:42.878Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:35:42.878Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:35:42.890Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:35:42.891Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T23:35:42.892Z ‚úÖ [PID:95907] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:35:42.892Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:35:42.892Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T23:35:42.892Z üöó Car Crash Lawyer AI - Server Ready [PID:95907]
[36m[INFO][0m 2025-11-17T23:35:42.892Z ============================================================
[32m[SUCCESS][0m 2025-11-17T23:35:42.892Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:35:42.892Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:35:42.892Z 
üìä Services:
[36m[INFO][0m 2025-11-17T23:35:42.892Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T23:35:42.892Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T23:35:42.892Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T23:35:42.892Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T23:35:42.892Z ============================================================

[32m[SUCCESS][0m 2025-11-17T23:35:42.968Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T23:35:43.043Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T23:35:43.160Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T23:35:43.599Z ‚úÖ OpenAI connected
[32m[SUCCESS][0m 2025-11-17T23:35:43.908Z ‚úÖ Health check passed: 200
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:95964] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:95964] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:35:49.506Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:35:49.599Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:35:49.610Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:35:49.651Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:35:49.651Z Insurance API not configured - insurance lookups will be skipped
üîç SAFETY CONTROLLER: Starting module load
üîç SAFETY CONTROLLER: Supabase client created
üîç SAFETY CONTROLLER: About to define mapSafetyStatusToBoolean
üîç SAFETY CONTROLLER: mapSafetyStatusToBoolean defined
üîç SAFETY CONTROLLER: About to define updateSafetyStatus
üîç SAFETY CONTROLLER: updateSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getSafetyStatus
üîç SAFETY CONTROLLER: getSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getMyStatus
DEBUG: getMyStatus function type: function
DEBUG: Functions before export: {
  updateSafetyStatus: 'function',
  getSafetyStatus: 'function',
  getMyStatus: 'function',
  mapSafetyStatusToBoolean: 'function'
}
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:35:49.655Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:35:49.656Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:35:49.656Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:35:49.656Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:35:49.656Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:35:49.656Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:35:49.656Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:35:49.656Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:35:49.656Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:35:49.656Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:35:49.656Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:35:49.658Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:35:49.658Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:35:49.668Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:35:49.669Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:35:49.670Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:35:49.670Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:35:49.671Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:35:49.672Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:35:49.672Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:35:49.673Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:35:49.673Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:35:49.673Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:35:49.673Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:35:49.673Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:35:49.673Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:35:49.673Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:35:49.673Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:35:49.673Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:35:49.673Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:35:49.673Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:35:49.673Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:35:49.673Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:35:49.673Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:35:49.685Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:35:49.685Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T23:35:49.687Z ‚ùå [PID:95964] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T23:35:49.687Z üí° [PID:95964] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T23:35:49.687Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T23:35:49.687Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:96003] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:96003] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:36:02.230Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:36:02.318Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:36:02.329Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:36:02.369Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:36:02.370Z Insurance API not configured - insurance lookups will be skipped
üîç SAFETY CONTROLLER: Starting module load
üîç SAFETY CONTROLLER: Supabase client created
üîç SAFETY CONTROLLER: About to define mapSafetyStatusToBoolean
üîç SAFETY CONTROLLER: mapSafetyStatusToBoolean defined
üîç SAFETY CONTROLLER: About to define updateSafetyStatus
üîç SAFETY CONTROLLER: updateSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getSafetyStatus
üîç SAFETY CONTROLLER: getSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getMyStatus
üîç SAFETY CONTROLLER: getMyStatus defined
üîç SAFETY CONTROLLER: About to run debug logging
DEBUG: getMyStatus function type: function
DEBUG: Functions before export: {
  updateSafetyStatus: 'function',
  getSafetyStatus: 'function',
  getMyStatus: 'function',
  mapSafetyStatusToBoolean: 'function'
}
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:36:02.373Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:36:02.374Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:36:02.374Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:36:02.374Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:36:02.374Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:36:02.374Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:36:02.374Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:36:02.374Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:36:02.374Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:36:02.374Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:36:02.374Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:36:02.377Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:36:02.377Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:36:02.387Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:36:02.388Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:36:02.389Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:36:02.390Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:36:02.390Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:36:02.391Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:36:02.392Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:36:02.393Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:36:02.393Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:36:02.393Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:36:02.393Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:36:02.393Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:36:02.393Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:36:02.393Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:36:02.393Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:36:02.393Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:36:02.393Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:36:02.393Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:36:02.393Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:36:02.393Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:36:02.393Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:36:02.404Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:36:02.404Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T23:36:02.406Z ‚úÖ [PID:96003] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:36:02.406Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:36:02.406Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T23:36:02.406Z üöó Car Crash Lawyer AI - Server Ready [PID:96003]
[36m[INFO][0m 2025-11-17T23:36:02.406Z ============================================================
[32m[SUCCESS][0m 2025-11-17T23:36:02.406Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:36:02.406Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:36:02.406Z 
üìä Services:
[36m[INFO][0m 2025-11-17T23:36:02.406Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T23:36:02.406Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T23:36:02.406Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T23:36:02.406Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T23:36:02.406Z ============================================================

[32m[SUCCESS][0m 2025-11-17T23:36:02.534Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T23:36:02.586Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T23:36:02.654Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T23:36:03.110Z ‚úÖ OpenAI connected
[32m[SUCCESS][0m 2025-11-17T23:36:03.422Z ‚úÖ Health check passed: 200
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:96180] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:96180] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:36:34.775Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:36:34.862Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:36:34.872Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:36:34.912Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:36:34.913Z Insurance API not configured - insurance lookups will be skipped
üîç SAFETY CONTROLLER: Starting module load
üîç SAFETY CONTROLLER: Supabase client created
üîç SAFETY CONTROLLER: About to define mapSafetyStatusToBoolean
üîç SAFETY CONTROLLER: mapSafetyStatusToBoolean defined
üîç SAFETY CONTROLLER: About to define updateSafetyStatus
üîç SAFETY CONTROLLER: updateSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getSafetyStatus
üîç SAFETY CONTROLLER: getSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getMyStatus
üîç SAFETY CONTROLLER: getMyStatus defined
üîç SAFETY CONTROLLER: About to run debug logging
üîç SAFETY CONTROLLER: Checking getMyStatus type...
üîç SAFETY CONTROLLER: getMyStatus type is: function
üîç SAFETY CONTROLLER: About to export...
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean'
]
[36m[INFO][0m 2025-11-17T23:36:34.916Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:36:34.917Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:36:34.917Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:36:34.917Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:36:34.917Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:36:34.917Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:36:34.917Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:36:34.917Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:36:34.917Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:36:34.917Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:36:34.917Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:36:34.919Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:36:34.919Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:36:34.930Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:36:34.930Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:36:34.931Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:36:34.932Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:36:34.933Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:36:34.933Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:36:34.934Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:36:34.935Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:36:34.935Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:36:34.935Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:36:34.935Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:36:34.935Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:36:34.935Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:36:34.935Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:36:34.935Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:36:34.935Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:36:34.935Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:36:34.935Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:36:34.935Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:36:34.935Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:36:34.935Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:36:34.947Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:36:34.947Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T23:36:34.948Z ‚ùå [PID:96180] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T23:36:34.949Z üí° [PID:96180] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T23:36:34.949Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T23:36:34.949Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:96524] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:96524] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:46:29.066Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:46:29.260Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:46:29.283Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:46:29.357Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:46:29.359Z Insurance API not configured - insurance lookups will be skipped
üîç SAFETY CONTROLLER: Starting module load
üîç SAFETY CONTROLLER: Supabase client created
üîç SAFETY CONTROLLER: About to define mapSafetyStatusToBoolean
üîç SAFETY CONTROLLER: mapSafetyStatusToBoolean defined
üîç SAFETY CONTROLLER: About to define updateSafetyStatus
üîç SAFETY CONTROLLER: updateSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getSafetyStatus
üîç SAFETY CONTROLLER: getSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getMyStatus
üîç SAFETY CONTROLLER: getMyStatus defined
üîç SAFETY CONTROLLER: About to run debug logging
üîç SAFETY CONTROLLER: Checking getMyStatus type...
üîç SAFETY CONTROLLER: getMyStatus type is: function
üîç SAFETY CONTROLLER: About to export...
üîç SAFETY CONTROLLER: Export timestamp: 2025-11-17T23:46:29.359Z
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean',
  '_cacheDebug'
]
[36m[INFO][0m 2025-11-17T23:46:29.365Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:46:29.366Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:46:29.366Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:46:29.366Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:46:29.366Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:46:29.366Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:46:29.366Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:46:29.366Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:46:29.366Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:46:29.366Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:46:29.366Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:46:29.371Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:46:29.371Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:46:29.381Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:46:29.382Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:46:29.383Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:46:29.384Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:46:29.385Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:46:29.385Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:46:29.386Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:46:29.387Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:46:29.387Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:46:29.387Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:46:29.387Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:46:29.387Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:46:29.387Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:46:29.387Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:46:29.387Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:46:29.387Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:46:29.387Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:46:29.387Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:46:29.387Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:46:29.387Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:46:29.387Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:46:29.400Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:46:29.400Z ‚úÖ WebSocket initialized
[31m[ERROR][0m 2025-11-17T23:46:29.401Z ‚ùå [PID:96524] Server error: {"code":"EADDRINUSE","message":"listen EADDRINUSE: address already in use 0.0.0.0:3000","port":3000,"stack":"Error: listen EADDRINUSE: address already in use 0.0.0.0:3000\n    at Server.setupListenHandle [as _listen2] (node:net:1940:16)\n    at listenInCluster (node:net:1997:12)\n    at node:net:2206:7\n    at process.processTicksAndRejections (node:internal/process/task_queues:90:21)"}
[31m[ERROR][0m 2025-11-17T23:46:29.402Z üí° [PID:96524] Port 3000 is already in use. Try:
[31m[ERROR][0m 2025-11-17T23:46:29.402Z    lsof -i :3000 && kill -9 $(lsof -t -i:3000)
[31m[ERROR][0m 2025-11-17T23:46:29.402Z    Or stop the running "Server" workflow in Replit
[31m[nodemon] app crashed - waiting for file changes before starting...[39m
[32m[nodemon] restarting due to changes...[39m
[32m[nodemon] starting `node index.js`[39m
üîß [PID:96586] Starting from: /Users/ianring/Node.js/index.js
‚úÖ Loaded updated OpenAI API key from .env
‚úÖ Loaded Supabase credentials from .env
‚úÖ Loaded PORT from .env: 3000
üîå [PID:96586] Using PORT: 3000, HOST: 0.0.0.0
[32m[SUCCESS][0m 2025-11-17T23:46:35.996Z ‚úÖ Auth service initialized (ANON + SERVICE ROLE keys)
[36m[INFO][0m 2025-11-17T23:46:36.083Z ‚úÖ ExportService initialized
[36m[INFO][0m 2025-11-17T23:46:36.093Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
No logging configuration. Using default config
[36m[INFO][0m 2025-11-17T23:46:36.136Z ‚úÖ Adobe PDF Services initialized successfully
[33m[WARN][0m 2025-11-17T23:46:36.137Z Insurance API not configured - insurance lookups will be skipped
üîç SAFETY CONTROLLER: Starting module load
üîç SAFETY CONTROLLER: Supabase client created
üîç SAFETY CONTROLLER: About to define mapSafetyStatusToBoolean
üîç SAFETY CONTROLLER: mapSafetyStatusToBoolean defined
üîç SAFETY CONTROLLER: About to define updateSafetyStatus
üîç SAFETY CONTROLLER: updateSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getSafetyStatus
üîç SAFETY CONTROLLER: getSafetyStatus defined
üîç SAFETY CONTROLLER: About to define getMyStatus
üîç SAFETY CONTROLLER: getMyStatus defined
üîç SAFETY CONTROLLER: About to run debug logging
üîç SAFETY CONTROLLER: Checking getMyStatus type...
üîç SAFETY CONTROLLER: getMyStatus type is: function
üîç SAFETY CONTROLLER: About to export...
üîç SAFETY CONTROLLER: Export timestamp: 2025-11-17T23:46:36.137Z
Safety Controller Methods: [
  'updateSafetyStatus',
  'getSafetyStatus',
  'getMyStatus',
  'mapSafetyStatusToBoolean',
  '_cacheDebug'
]
Safety Controller Cache Debug: { timestamp: '2025-11-17T23:46:36.137Z', hasGetMyStatus: true }
[36m[INFO][0m 2025-11-17T23:46:36.140Z ‚úÖ PDF modules loaded
[32m[SUCCESS][0m 2025-11-17T23:46:36.141Z ‚úÖ Supabase initialized
[36m[INFO][0m 2025-11-17T23:46:36.141Z ‚úÖ GDPR Service initialized (Storage-based)
[32m[SUCCESS][0m 2025-11-17T23:46:36.141Z ‚úÖ GDPR service initialized
[36m[INFO][0m 2025-11-17T23:46:36.141Z ‚úÖ ImageProcessor service initialized
[36m[INFO][0m 2025-11-17T23:46:36.141Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:46:36.141Z ‚úÖ Image processor V1 initialized
[32m[SUCCESS][0m 2025-11-17T23:46:36.141Z ‚úÖ Image processor V2 initialized
[36m[INFO][0m 2025-11-17T23:46:36.141Z ‚úÖ ImageProcessorV2 service initialized with user_documents support
[32m[SUCCESS][0m 2025-11-17T23:46:36.141Z ‚úÖ Image processor V2 initialized (with status tracking)
[32m[SUCCESS][0m 2025-11-17T23:46:36.141Z ‚úÖ Auth service initialized
[36m[INFO][0m 2025-11-17T23:46:36.143Z [CRON] Starting cron manager...
[36m[INFO][0m 2025-11-17T23:46:36.143Z [CRON] Environment: DEVELOPMENT
[36m[INFO][0m 2025-11-17T23:46:36.154Z [CRON] Scheduled 'backup-incidents' (0 1 * * *)
[36m[INFO][0m 2025-11-17T23:46:36.155Z [CRON] Scheduled 'backup-accounts' (30 1 * * *)
[36m[INFO][0m 2025-11-17T23:46:36.156Z [CRON] Scheduled 'delete-expired-incidents' (0 2 * * *)
[36m[INFO][0m 2025-11-17T23:46:36.156Z [CRON] Scheduled 'delete-expired-accounts' (30 2 * * *)
[36m[INFO][0m 2025-11-17T23:46:36.157Z [CRON] Scheduled 'process-renewals' (0 3 * * *)
[36m[INFO][0m 2025-11-17T23:46:36.158Z [CRON] Scheduled 'incident-warnings' (0 9 * * *)
[36m[INFO][0m 2025-11-17T23:46:36.159Z [CRON] Scheduled 'subscription-warnings' (30 9 * * *)
[36m[INFO][0m 2025-11-17T23:46:36.159Z [CRON] Scheduled 'cleanup-s3-backups' (0 4 1 * *)
[36m[INFO][0m 2025-11-17T23:46:36.159Z [CRON] 8 cron jobs scheduled successfully
[36m[INFO][0m 2025-11-17T23:46:36.159Z 
[CRON] Scheduled Jobs:
[36m[INFO][0m 2025-11-17T23:46:36.159Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ
[36m[INFO][0m 2025-11-17T23:46:36.159Z   backup-incidents               0 1 * * *       (Daily at 1:00 AM)
[36m[INFO][0m 2025-11-17T23:46:36.159Z   backup-accounts                30 1 * * *      (Daily at 1:30 AM)
[36m[INFO][0m 2025-11-17T23:46:36.159Z   delete-expired-incidents       0 2 * * *       (Daily at 2:00 AM)
[36m[INFO][0m 2025-11-17T23:46:36.159Z   delete-expired-accounts        30 2 * * *      (Daily at 2:30 AM)
[36m[INFO][0m 2025-11-17T23:46:36.159Z   process-renewals               0 3 * * *       (Daily at 3:00 AM)
[36m[INFO][0m 2025-11-17T23:46:36.159Z   incident-warnings              0 9 * * *       (Daily at 9:00 AM)
[36m[INFO][0m 2025-11-17T23:46:36.159Z   subscription-warnings          30 9 * * *      (Daily at 9:30 AM)
[36m[INFO][0m 2025-11-17T23:46:36.159Z   cleanup-s3-backups             0 4 1 * *       (Monthly on 1st at 4:00 AM)
[36m[INFO][0m 2025-11-17T23:46:36.159Z ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ‚îÅ

[32m[SUCCESS][0m 2025-11-17T23:46:36.159Z ‚úÖ Cron manager initialized
[32m[SUCCESS][0m 2025-11-17T23:46:36.173Z WebSocket server initialized
[32m[SUCCESS][0m 2025-11-17T23:46:36.173Z ‚úÖ WebSocket initialized
[32m[SUCCESS][0m 2025-11-17T23:46:36.174Z ‚úÖ [PID:96586] Server listening on 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:46:36.174Z üåê Server accessible at: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:46:36.174Z 
============================================================
[32m[SUCCESS][0m 2025-11-17T23:46:36.174Z üöó Car Crash Lawyer AI - Server Ready [PID:96586]
[36m[INFO][0m 2025-11-17T23:46:36.174Z ============================================================
[32m[SUCCESS][0m 2025-11-17T23:46:36.174Z üöÄ Server: 0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:46:36.174Z üåê Public URL: http://0.0.0.0:3000
[36m[INFO][0m 2025-11-17T23:46:36.174Z 
üìä Services:
[36m[INFO][0m 2025-11-17T23:46:36.174Z    ‚úÖ Supabase Database
[36m[INFO][0m 2025-11-17T23:46:36.174Z    ‚úÖ OpenAI API
[36m[INFO][0m 2025-11-17T23:46:36.174Z    ‚ùå GitHub Webhooks
[36m[INFO][0m 2025-11-17T23:46:36.174Z 
‚ö° System Ready!
[36m[INFO][0m 2025-11-17T23:46:36.174Z ============================================================

[32m[SUCCESS][0m 2025-11-17T23:46:36.394Z ‚úÖ what3words connected
[32m[SUCCESS][0m 2025-11-17T23:46:36.538Z ‚úÖ DVLA connected
[32m[SUCCESS][0m 2025-11-17T23:46:36.565Z ‚úÖ Supabase connected
[32m[SUCCESS][0m 2025-11-17T23:46:36.910Z ‚úÖ OpenAI connected
[32m[SUCCESS][0m 2025-11-17T23:46:37.192Z ‚úÖ Health check passed: 200
[36m[INFO][0m 2025-11-18T00:26:49.065Z 
‚ö†Ô∏è [PID:96586] SIGTERM received - shutting down gracefully...
[36m[INFO][0m 2025-11-18T00:26:49.066Z [CRON] Stopping all cron jobs...
[36m[INFO][0m 2025-11-18T00:26:49.067Z [CRON] Stopped 'backup-incidents'
[36m[INFO][0m 2025-11-18T00:26:49.067Z [CRON] Stopped 'backup-accounts'
[36m[INFO][0m 2025-11-18T00:26:49.067Z [CRON] Stopped 'delete-expired-incidents'
[36m[INFO][0m 2025-11-18T00:26:49.067Z [CRON] Stopped 'delete-expired-accounts'
[36m[INFO][0m 2025-11-18T00:26:49.067Z [CRON] Stopped 'process-renewals'
[36m[INFO][0m 2025-11-18T00:26:49.067Z [CRON] Stopped 'incident-warnings'
[36m[INFO][0m 2025-11-18T00:26:49.067Z [CRON] Stopped 'subscription-warnings'
[36m[INFO][0m 2025-11-18T00:26:49.067Z [CRON] Stopped 'cleanup-s3-backups'
[36m[INFO][0m 2025-11-18T00:26:49.067Z [CRON] All cron jobs stopped
[36m[INFO][0m 2025-11-18T00:26:49.067Z [Cron] All cron jobs stopped.
[36m[INFO][0m 2025-11-18T00:26:49.068Z [PID:96586] WebSocket server closed
[32m[SUCCESS][0m 2025-11-18T00:26:49.068Z ‚úÖ [PID:96586] Server closed gracefully
